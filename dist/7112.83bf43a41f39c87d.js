"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[7112],{7112:(k,g,r)=>{r.r(g),r.d(g,{BannerId:()=>L});var l=r(8728),m=r(3597),s=r(4341),p=r(9211),h=r(1256),f=r(6677),b=r(5779),v=r(9440),e=r(3664),E=r(4781),I=r(2200),B=r(1020),F=r(1914),M=r(5506),D=r(886);function y(i,d){1&i&&(e.j41(0,"small",20),e.EFF(1," Alt text is required. "),e.k0s())}function T(i,d){1&i&&(e.j41(0,"small",20),e.EFF(1," Alt text is required. "),e.k0s())}function P(i,d){if(1&i&&(e.j41(0,"div",2)(1,"div",21)(2,"label",22),e.EFF(3),e.k0s(),e.j41(4,"div",23),e.nrm(5,"img",24),e.k0s()()()),2&i){const t=e.XpG();e.R7$(3),e.JRh(t.isViewMode()?"Image":"Current Image"),e.R7$(2),e.Y8G("src",t.baseUrl+t.banner.main_image,e.B4B)("alt",t.banner.en_alt_image)}}function R(i,d){1&i&&(e.j41(0,"div",27),e.nrm(1,"i",28),e.j41(2,"p",29),e.EFF(3," Drag and drop an image here or click to select "),e.k0s()())}function O(i,d){if(1&i){const t=e.RV6();e.j41(0,"div",25)(1,"label",22),e.EFF(2," Upload New Image "),e.k0s(),e.j41(3,"p-fileupload",26),e.bIt("onSelect",function(n){l.eBV(t);const o=e.XpG();return l.Njj(o.onImageSelect(n))}),e.DNE(4,R,4,0,"ng-template",null,0,e.C5r),e.k0s()()}2&i&&(e.R7$(3),e.Y8G("multiple",!1)("auto",!1))}function C(i,d){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"p-button",30),e.bIt("click",function(){l.eBV(t);const n=e.XpG();return l.Njj(n.onCancel())}),e.k0s(),e.nrm(2,"p-button",31),e.bVm()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("disabled",t.bannerForm.invalid||t.isLoading())("loading",t.isLoading())}}function j(i,d){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"p-button",32),e.bIt("click",function(){l.eBV(t);const n=e.XpG();return l.Njj(n.onCancel())}),e.k0s(),e.j41(2,"p-button",33),e.bIt("click",function(){l.eBV(t);const n=e.XpG();return l.Njj(n.onEditBanner())}),e.k0s(),e.bVm()}}let L=(()=>{class i{constructor(){this.bannerService=(0,l.WQX)(v.b),this.fb=(0,l.WQX)(s.ok),this.messageService=(0,l.WQX)(b.bg),this.route=(0,l.WQX)(p.nX),this.router=(0,l.WQX)(p.Ix),this.mode=(0,l.vPA)("edit"),this.heroId=(0,l.vPA)(null),this.isLoading=(0,l.vPA)(!1),this.baseUrl=h.p,this.selectedFile=null,this.isEditMode=(0,m.EW)(()=>"edit"===this.mode()),this.isViewMode=(0,m.EW)(()=>"view"===this.mode()),this.isFormValid=(0,m.EW)(()=>!!this.bannerForm&&this.bannerForm.valid),this.pageTitle=(0,m.EW)(()=>{switch(this.mode()){case"edit":return"Edit Banner Mode";case"view":return"View Banner Mode";default:return"Banner Form"}}),(0,m.QZ)(()=>{this.bannerForm&&(this.isViewMode()?this.bannerForm.disable():this.bannerForm.enable())})}ngOnInit(){this.initForm(),this.setupRouteHandling()}setupRouteHandling(){this.route.data.subscribe(t=>{this.mode.set(t.mode||"create")}),this.route.params.subscribe(t=>{const a=t.id;a&&(this.heroId.set(+a),this.loadBannerData(+a))})}initForm(){this.bannerForm=this.fb.group({page_name:["",[s.k0.required,s.k0.minLength(3)]],en_alt_image:["",[s.k0.required]],ar_alt_image:["",[s.k0.required]]})}loadBannerData(t){const a=t||this.heroId()||1;this.bannerService.getBanner(a).subscribe({next:n=>{this.banner=n.data,this.bannerForm.patchValue({page_name:n.data.page_name,en_alt_image:n.data.en_alt_image,ar_alt_image:n.data.ar_alt_image}),this.isLoading.set(!1)},error:n=>{console.error("Error loading Banner data:",n),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load Banner data"}),this.isLoading.set(!1)}})}onImageSelect(t){const a=t.files||t.currentFiles;if(a&&a.length>0){const n=a[0];if(!n.type.startsWith("image/"))return void this.messageService.add({severity:"error",summary:"Invalid File",detail:"Please select an image file"});if(n.size>5e6)return void this.messageService.add({severity:"error",summary:"File Too Large",detail:"Please select an image smaller than 5MB"});this.selectedFile=n,this.messageService.add({severity:"success",summary:"File Selected",detail:`Image "${n.name}" selected successfully`})}}onSubmit(){this.bannerForm.invalid||this.isViewMode()||(this.isLoading.set(!0),this.updateBannerHero())}updateBannerHero(){if(this.bannerForm.valid){this.isLoading.set(!0);const t=this.bannerForm.value;console.log(t),this.bannerService.updateBanner(this.banner.id,t,this.selectedFile||void 0).subscribe({next:a=>{console.log("Update successful:",a),this.messageService.add({severity:"success",summary:"Success",detail:"Banner updated successfully"}),this.loadBannerData()},error:a=>{console.error("Error updating Banner:",a),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update Banner"}),this.isLoading.set(!1)}})}else this.messageService.add({severity:"warn",summary:"Warning",detail:"Please fill all required fields correctly"})}onCancel(){this.router.navigate(["/dashboard/banners"])}onEditBanner(){this.heroId()&&this.router.navigate(["../../edit",this.heroId()],{relativeTo:this.route})}static#e=this.\u0275fac=function(a){return new(a||i)};static#n=this.\u0275cmp=e.VBU({type:i,selectors:[["app-banner-id"]],decls:29,vars:12,consts:[["empty",""],[1,"grid"],[1,"col-12"],["styleClass","shadow-2",3,"header"],[1,"p-fluid"],[3,"ngSubmit","formGroup"],[1,"grid","mt-4"],[1,"col-12","md:col-6"],[1,"text-2xl","font-bold","mb-4"],[1,"field","mb-3"],["for","en_alt_image",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_alt_image","formControlName","en_alt_image","placeholder","Enter en image alt text",1,"w-full",2,"width","100%"],["class","p-error block",4,"ngIf"],[1,"col-12","md:col-6","right-side"],["for","ar_alt_image",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","ar_alt_image","formControlName","ar_alt_image","placeholder","Enter ar image alt text",1,"w-full",2,"width","100%"],["class","col-12",4,"ngIf"],["class","field col-12",4,"ngIf"],[1,"flex","justify-content-end","gap-2","pt-3"],[4,"ngIf"],[1,"p-error","block"],[1,"field"],[1,"block","text-900","font-medium","mb-2"],[1,"border-1","border-300","border-round","p-3","text-center"],[1,"w-full","max-w-20rem","h-auto","border-round","shadow-2",2,"max-height","300px","object-fit","cover",3,"src","alt"],[1,"field","col-12"],["name","main_image","accept","image/*","maxFileSize","5000000","mode","advanced","chooseLabel","Choose Image","uploadLabel"," ","cancelLabel","Cancel",3,"onSelect","multiple","auto"],[1,"text-center","p-4"],[1,"pi","pi-cloud-upload","text-4xl","text-300"],[1,"mt-2","mb-0"],["label","Cancel","icon","pi pi-times","severity","secondary","type","button",3,"click"],["label","Update Banner","icon","pi pi-check","severity","primary","type","submit",3,"disabled","loading"],["label","Back","icon","pi pi-arrow-left","severity","secondary","type","button",3,"click"],["label","Edit","icon","pi pi-pencil","severity","primary","type","button",3,"click"]],template:function(a,n){if(1&a&&(e.j41(0,"div",1)(1,"div",2)(2,"p-card",3)(3,"div",4)(4,"form",5),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(5,"div",6)(6,"div",7)(7,"h2",8),e.EFF(8,"English content"),e.k0s(),e.j41(9,"div",9)(10,"label",10),e.EFF(11," Alt Text "),e.k0s(),e.nrm(12,"input",11),e.DNE(13,y,2,0,"small",12),e.k0s()(),e.j41(14,"div",13)(15,"h2",8),e.EFF(16,"Arabic content"),e.k0s(),e.j41(17,"div",9)(18,"label",14),e.EFF(19," Alt Text "),e.k0s(),e.nrm(20,"input",15),e.DNE(21,T,2,0,"small",12),e.k0s()(),e.DNE(22,P,6,3,"div",16)(23,O,6,2,"div",17),e.j41(24,"div",2)(25,"div",18),e.DNE(26,C,3,2,"ng-container",19)(27,j,3,0,"ng-container",19),e.k0s()()()()()()()(),e.nrm(28,"p-toast")),2&a){let o,_,c,u;e.R7$(2),e.Y8G("header",n.pageTitle()),e.R7$(2),e.Y8G("formGroup",n.bannerForm),e.R7$(8),e.AVh("ng-invalid",(null==(o=n.bannerForm.get("en_alt_image"))?null:o.invalid)&&(null==(o=n.bannerForm.get("en_alt_image"))?null:o.touched)),e.R7$(),e.Y8G("ngIf",(null==(_=n.bannerForm.get("en_alt_image"))?null:_.invalid)&&(null==(_=n.bannerForm.get("en_alt_image"))?null:_.touched)&&!n.isViewMode()),e.R7$(7),e.AVh("ng-invalid",(null==(c=n.bannerForm.get("ar_alt_image"))?null:c.invalid)&&(null==(c=n.bannerForm.get("ar_alt_image"))?null:c.touched)),e.R7$(),e.Y8G("ngIf",(null==(u=n.bannerForm.get("ar_alt_image"))?null:u.invalid)&&(null==(u=n.bannerForm.get("ar_alt_image"))?null:u.touched)&&!n.isViewMode()),e.R7$(),e.Y8G("ngIf",null==n.banner?null:n.banner.main_image),e.R7$(),e.Y8G("ngIf",!n.isViewMode()),e.R7$(3),e.Y8G("ngIf",n.isEditMode()),e.R7$(),e.Y8G("ngIf",n.isViewMode())}},dependencies:[f.Y,E.ef,I.bT,B.$n,F.Sm,M.Zp,D.y8,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],styles:[".p-fileupload-upload-button{display:none!important}  .p-fileupload-file-badge{display:none!important}  .ql-editor .ql-direction-rtl{text-align:right!important}"]})}return i})()}}]);