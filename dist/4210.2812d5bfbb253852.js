"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[4210],{4210:(L,f,n)=>{n.r(f),n.d(f,{SeoId:()=>j});var l=n(8728),r=n(3597),a=n(4341),v=n(9211),F=n(1256),I=n(6677),M=n(5779),b=n(1052),e=n(3664),S=n(2200),D=n(1020),T=n(1914),O=n(5506),P=n(886);function R(s,d){1&s&&(e.j41(0,"small",20),e.EFF(1," Meta title is required. "),e.k0s())}function k(s,d){1&s&&(e.j41(0,"small",20),e.EFF(1," Meta title is required. "),e.k0s())}function y(s,d){1&s&&(e.j41(0,"small",20),e.EFF(1," Meta title is required. "),e.k0s())}function C(s,d){1&s&&(e.j41(0,"small",20),e.EFF(1," Meta title is required. "),e.k0s())}function V(s,d){if(1&s){const i=e.RV6();e.qex(0),e.j41(1,"p-button",21),e.bIt("click",function(){l.eBV(i);const t=e.XpG();return l.Njj(t.onCancel())}),e.k0s(),e.nrm(2,"p-button",22),e.bVm()}if(2&s){const i=e.XpG();e.R7$(2),e.Y8G("disabled",i.seoForm.invalid||i.isLoading())("loading",i.isLoading())}}function W(s,d){if(1&s){const i=e.RV6();e.qex(0),e.j41(1,"p-button",23),e.bIt("click",function(){l.eBV(i);const t=e.XpG();return l.Njj(t.onCancel())}),e.k0s(),e.j41(2,"p-button",24),e.bIt("click",function(){l.eBV(i);const t=e.XpG();return l.Njj(t.onEditSeo())}),e.k0s(),e.bVm()}}let j=(()=>{class s{constructor(){this.seoService=(0,l.WQX)(b.B),this.fb=(0,l.WQX)(a.ok),this.messageService=(0,l.WQX)(M.bg),this.route=(0,l.WQX)(v.nX),this.router=(0,l.WQX)(v.Ix),this.mode=(0,l.vPA)("edit"),this.seoId=(0,l.vPA)(null),this.isLoading=(0,l.vPA)(!1),this.baseUrl=F.p,this.selectedFile=null,this.isEditMode=(0,r.EW)(()=>"edit"===this.mode()),this.isViewMode=(0,r.EW)(()=>"view"===this.mode()),this.isFormValid=(0,r.EW)(()=>!!this.seoForm&&this.seoForm.valid),this.pageTitle=(0,r.EW)(()=>{switch(this.mode()){case"edit":return"Edit SEO Mode";case"view":return"View SEO Mode";default:return"SEO Form"}}),(0,r.QZ)(()=>{this.seoForm&&(this.isViewMode()?this.seoForm.disable():this.seoForm.enable())})}ngOnInit(){this.initForm(),this.setupRouteHandling()}setupRouteHandling(){this.route.data.subscribe(i=>{this.mode.set(i.mode||"create")}),this.route.params.subscribe(i=>{const o=i.id;o&&(this.seoId.set(+o),this.loadSeoData(+o))})}initForm(){this.seoForm=this.fb.group({page_name:["",[a.k0.required,a.k0.minLength(3)]],en_meta_title:["",[a.k0.required]],ar_meta_title:["",[a.k0.required]],en_meta_description:["",[a.k0.required]],ar_meta_description:["",[a.k0.required]]})}loadSeoData(i){const o=i||this.seoId()||1;this.seoService.getSeo(o).subscribe({next:t=>{this.seo=t.data,this.seoForm.patchValue({page_name:t.data.page_name,en_meta_title:t.data.en_meta_title,ar_meta_title:t.data.ar_meta_title,en_meta_description:t.data.en_meta_description,ar_meta_description:t.data.ar_meta_description}),this.isLoading.set(!1)},error:t=>{console.error("Error loading SEO data:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load SEO data"}),this.isLoading.set(!1)}})}onSubmit(){this.seoForm.invalid||this.isViewMode()||(this.isLoading.set(!0),this.updateSeo())}updateSeo(){if(this.seoForm.valid){this.isLoading.set(!0);const i=this.seoForm.value;console.log(i),this.seoService.updateSeo(this.seo.id,i).subscribe({next:o=>{console.log("Update successful:",o),this.messageService.add({severity:"success",summary:"Success",detail:"SEO updated successfully"}),this.loadSeoData()},error:o=>{console.error("Error updating SEO:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update SEO"}),this.isLoading.set(!1)}})}else this.messageService.add({severity:"warn",summary:"Warning",detail:"Please fill all required fields correctly"})}onCancel(){this.router.navigate(["/dashboard/seo"])}onEditSeo(){this.seoId()&&this.router.navigate(["../../edit",this.seoId()],{relativeTo:this.route})}static#e=this.\u0275fac=function(o){return new(o||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-seo-id"]],decls:37,vars:16,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-2",3,"header"],[1,"p-fluid"],[3,"ngSubmit","formGroup"],[1,"grid","mt-4"],[1,"col-12","md:col-6"],[1,"text-2xl","font-bold","mb-4"],[1,"field","mb-3"],["for","en_meta_title",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_meta_title","formControlName","en_meta_title","placeholder","Enter en meta title",1,"w-full",2,"width","100%"],["class","p-error block",4,"ngIf"],["for","en_meta_description",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_meta_description","formControlName","en_meta_description","placeholder","Enter en meta description",1,"w-full",2,"width","100%"],[1,"col-12","md:col-6","right-side"],["for","ar_meta_title",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_meta_title","formControlName","ar_meta_title","placeholder","Enter ar meta title",1,"w-full",2,"width","100%"],["pInputText","","id","ar_meta_description","formControlName","ar_meta_description","placeholder","Enter ar meta description",1,"w-full",2,"width","100%"],[1,"flex","justify-content-end","gap-2","pt-3"],[4,"ngIf"],[1,"p-error","block"],["label","Cancel","icon","pi pi-times","severity","secondary","type","button",3,"click"],["label","Update Slider","icon","pi pi-check","severity","primary","type","submit",3,"disabled","loading"],["label","Back","icon","pi pi-arrow-left","severity","secondary","type","button",3,"click"],["label","Edit","icon","pi pi-pencil","severity","primary","type","button",3,"click"]],template:function(o,t){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"div",3)(4,"form",4),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(5,"div",5)(6,"div",6)(7,"h2",7),e.EFF(8,"English Meta Title"),e.k0s(),e.j41(9,"div",8)(10,"label",9),e.EFF(11," Meta Title "),e.k0s(),e.nrm(12,"input",10),e.DNE(13,R,2,0,"small",11),e.k0s(),e.j41(14,"div",8)(15,"label",12),e.EFF(16," Meta Description "),e.k0s(),e.nrm(17,"input",13),e.DNE(18,k,2,0,"small",11),e.k0s()(),e.j41(19,"div",14)(20,"h2",7),e.EFF(21,"Arabic Meta Title"),e.k0s(),e.j41(22,"div",8)(23,"label",15),e.EFF(24," Meta Title "),e.k0s(),e.nrm(25,"input",16),e.DNE(26,y,2,0,"small",11),e.k0s(),e.j41(27,"div",8)(28,"label",12),e.EFF(29," Meta Description "),e.k0s(),e.nrm(30,"input",17),e.DNE(31,C,2,0,"small",11),e.k0s()(),e.j41(32,"div",1)(33,"div",18),e.DNE(34,V,3,2,"ng-container",19)(35,W,3,0,"ng-container",19),e.k0s()()()()()()()(),e.nrm(36,"p-toast")),2&o){let _,m,u,c,p,h,g,E;e.R7$(2),e.Y8G("header",t.pageTitle()),e.R7$(2),e.Y8G("formGroup",t.seoForm),e.R7$(8),e.AVh("ng-invalid",(null==(_=t.seoForm.get("en_meta_title"))?null:_.invalid)&&(null==(_=t.seoForm.get("en_meta_title"))?null:_.touched)),e.R7$(),e.Y8G("ngIf",(null==(m=t.seoForm.get("en_meta_title"))?null:m.invalid)&&(null==(m=t.seoForm.get("en_meta_title"))?null:m.touched)&&!t.isViewMode()),e.R7$(4),e.AVh("ng-invalid",(null==(u=t.seoForm.get("en_meta_description"))?null:u.invalid)&&(null==(u=t.seoForm.get("en_meta_description"))?null:u.touched)),e.R7$(),e.Y8G("ngIf",(null==(c=t.seoForm.get("en_meta_description"))?null:c.invalid)&&(null==(c=t.seoForm.get("en_meta_description"))?null:c.touched)&&!t.isViewMode()),e.R7$(7),e.AVh("ng-invalid",(null==(p=t.seoForm.get("ar_meta_title"))?null:p.invalid)&&(null==(p=t.seoForm.get("ar_meta_title"))?null:p.touched)),e.R7$(),e.Y8G("ngIf",(null==(h=t.seoForm.get("ar_meta_title"))?null:h.invalid)&&(null==(h=t.seoForm.get("ar_meta_title"))?null:h.touched)&&!t.isViewMode()),e.R7$(4),e.AVh("ng-invalid",(null==(g=t.seoForm.get("ar_meta_description"))?null:g.invalid)&&(null==(g=t.seoForm.get("ar_meta_description"))?null:g.touched)),e.R7$(),e.Y8G("ngIf",(null==(E=t.seoForm.get("ar_meta_description"))?null:E.invalid)&&(null==(E=t.seoForm.get("ar_meta_description"))?null:E.touched)&&!t.isViewMode()),e.R7$(3),e.Y8G("ngIf",t.isEditMode()),e.R7$(),e.Y8G("ngIf",t.isViewMode())}},dependencies:[I.Y,S.bT,D.$n,T.Sm,O.Zp,P.y8,a.qT,a.me,a.BC,a.cb,a.j4,a.JD],encapsulation:2})}return s})()}}]);