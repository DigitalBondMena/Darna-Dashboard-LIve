"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[1116],{1116:(x,d,a)=>{a.r(d),a.d(d,{Careers:()=>I});var i=a(8728),h=a(9211),C=a(1256),E=a(6259),v=a(5731),g=a(5779),p=a(1314),f=a(980),e=a(3664),c=a(5531),M=a(8132),u=a(4341),F=a(2292),T=a(1020);const R=()=>["create"],j=()=>({"min-width":"50rem"}),y=n=>["view",n],D=n=>["edit",n];function S(n,_){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"th",6),e.EFF(2," ID "),e.nrm(3,"p-sortIcon",7),e.k0s(),e.j41(4,"th",8),e.EFF(5," Name "),e.nrm(6,"p-sortIcon",9),e.k0s(),e.j41(7,"th",10),e.EFF(8," Title "),e.nrm(9,"p-sortIcon",11),e.k0s(),e.j41(10,"th",12),e.EFF(11," Type "),e.nrm(12,"p-sortIcon",13),e.k0s(),e.j41(13,"th",14),e.EFF(14," Location "),e.nrm(15,"p-sortIcon",15),e.k0s(),e.j41(16,"th",16),e.EFF(17," Category "),e.nrm(18,"p-sortIcon",17),e.k0s(),e.j41(19,"th"),e.EFF(20,"View"),e.k0s(),e.j41(21,"th"),e.EFF(22,"Edit"),e.k0s(),e.j41(23,"th",18)(24,"div",19)(25,"span"),e.EFF(26,"Status"),e.k0s(),e.j41(27,"p-select",20),e.mxI("ngModelChange",function(r){i.eBV(t);const l=e.XpG();return e.DH7(l.selectedStatusFilter,r)||(l.selectedStatusFilter=r),i.Njj(r)}),e.bIt("ngModelChange",function(r){i.eBV(t);const l=e.XpG();return i.Njj(l.onStatusFilter(r))}),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(27),e.Y8G("options",t.statusOptions),e.R50("ngModel",t.selectedStatusFilter),e.Y8G("showClear",!0)}}function O(n,_){1&n&&e.nrm(0,"i",26)}function b(n,_){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td")(14,"a",21),e.nrm(15,"i",22),e.k0s()(),e.j41(16,"td")(17,"a",21),e.nrm(18,"i",23),e.k0s()(),e.j41(19,"td")(20,"div",24)(21,"p-toggleswitch",25),e.bIt("ngModelChange",function(){const r=i.eBV(t).$implicit,l=e.XpG();return i.Njj(l.onToggleChange(r))}),e.k0s(),e.nVh(22,O,1,0,"i",26),e.k0s()()()}if(2&n){const t=_.$implicit,s=e.XpG();e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.en_name),e.R7$(2),e.JRh(t.en_title),e.R7$(2),e.JRh(t.en_type),e.R7$(2),e.JRh(t.en_location),e.R7$(2),e.JRh(t.en_category_name),e.R7$(2),e.Y8G("routerLink",e.eq3(11,y,t.en_slug)),e.R7$(3),e.Y8G("routerLink",e.eq3(13,D,t.en_slug)),e.R7$(4),e.Y8G("ngModel",s.returnStatus(t.active_status))("disabled",s.isToggleLoading(t.en_slug)),e.R7$(),e.vxM(s.isToggleLoading(t.en_slug)?22:-1)}}function P(n,_){1&n&&(e.j41(0,"tr")(1,"td",27)(2,"div",28),e.nrm(3,"i",29),e.j41(4,"span",30),e.EFF(5,"No data found"),e.k0s()()()())}let I=(()=>{class n{constructor(){this.route=(0,i.WQX)(h.nX),this.messageService=(0,i.WQX)(g.bg),this.baseUrl=C.p,this.heroService=(0,i.WQX)(E.v),this.checked=!1,this.loadingToggles=new Set,this.statusOptions=[{label:"Active",value:1},{label:"Inactive",value:0}],this.selectedStatusFilter=null}getMode(){return this.route.snapshot.queryParamMap.get("mode")}getSliderId(){return this.route.snapshot.queryParamMap.get("id")}ngOnInit(){this.heroService.getCareers().subscribe(t=>{this.allCareers=t.data,this.careers=t.data,console.log(this.careers[0])})}returnStatus(t){return 1==t}isToggleLoading(t){return this.loadingToggles.has(t)}onToggleChange(t){if(this.isToggleLoading(t.en_slug))return;this.loadingToggles.add(t.en_slug);const s=t.active_status,r=1===Number(t.active_status)?0:1;t.active_status=r,(1===Number(s)?this.heroService.disableCareer(t.id):this.heroService.activeCareer(t.id)).pipe((0,f.j)(()=>{this.loadingToggles.delete(t.en_slug)})).subscribe({next:o=>{if(o.data&&o.data.length>0){const m=o.data.find(L=>L.id===t.id);m&&(t.active_status=m.active_status)}this.messageService.add({severity:"success",summary:"Success",detail:`Career ${1===r?"activated":"deactivated"} successfully`})},error:o=>{t.active_status=s,console.error("Toggle failed:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update career status"})}})}onDelete(t){const s=this.careers.find(r=>r.id===t);s&&this.onToggleChange(s)}onActive(t){const s=this.careers.find(r=>r.en_slug===t);s&&this.onToggleChange(s)}onStatusFilter(t){this.careers=null==t?[...this.allCareers]:this.allCareers.filter(s=>Number(s.active_status)===Number(t))}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-careers"]],decls:8,vars:5,consts:[[1,"flex","justify-content-between","items-center","mb-4","w-full"],["label","Create New Career","icon","pi pi-plus","severity","primary",3,"routerLink"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","id"],["field","id"],["pSortableColumn","en_name"],["field","en_name"],["pSortableColumn","en_title"],["field","en_title"],["pSortableColumn","en_type"],["field","en_type"],["pSortableColumn","en_location"],["field","en_location"],["pSortableColumn","en_category_name"],["field","en_category_name"],["pSortableColumn","active_status",2,"max-width","50px"],[1,"flex","flex-column","gap-2"],["optionLabel","label","optionValue","value","appendTo","body","placeholder","Filter by Status",3,"ngModelChange","options","ngModel","showClear"],[3,"routerLink"],[1,"pi","pi-eye",2,"color","#673ab7"],[1,"pi","pi-pencil",2,"color","#673ab7"],[1,"flex","align-items-center","gap-2"],[3,"ngModelChange","ngModel","disabled"],[1,"pi","pi-spin","pi-spinner",2,"color","#673ab7","font-size","0.8rem"],["colspan","12",1,"text-center","p-4"],[1,"flex","flex-column","align-items-center","justify-content-center"],[1,"pi","pi-info-circle",2,"font-size","2rem","color","var(--text-color-secondary)"],[1,"mt-2",2,"color","var(--text-color-secondary)"]],template:function(s,r){1&s&&(e.j41(0,"div",0)(1,"h2"),e.EFF(2,"Careers Management"),e.k0s(),e.nrm(3,"p-button",1),e.k0s(),e.j41(4,"p-table",2),e.DNE(5,S,28,3,"ng-template",3)(6,b,23,15,"ng-template",4)(7,P,6,0,"ng-template",5),e.k0s()),2&s&&(e.R7$(3),e.Y8G("routerLink",e.lJ4(3,R)),e.R7$(),e.Y8G("value",r.careers)("tableStyle",e.lJ4(4,j)))},dependencies:[v.g,c.XI,g.Ei,c.Tg,c.yc,M.Wk,u.BC,u.vS,F.jF,T.$n,p.py,p.l6],encapsulation:2})}return n})()}}]);