"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[7804],{7804:(U,v,l)=>{l.r(v),l.d(v,{PartnersId:()=>N});var n=l(8728),m=l(3597),s=l(4341),E=l(9211),b=l(1256),F=l(6677),I=l(5779),P=l(5889),e=l(3664),M=l(4781),y=l(2200),T=l(1020),D=l(1914),k=l(5506),C=l(886);function R(i,o){1&i&&(e.j41(0,"small",24),e.EFF(1," Client name is required and must be at least 3 characters long. "),e.k0s())}function S(i,o){1&i&&(e.j41(0,"small",24),e.EFF(1," Alt text is required. "),e.k0s())}function j(i,o){1&i&&(e.j41(0,"small",24),e.EFF(1," Title is required and must be at least 3 characters long. "),e.k0s())}function L(i,o){1&i&&(e.j41(0,"small",24),e.EFF(1," Alt text is required. "),e.k0s())}function O(i,o){if(1&i&&(e.j41(0,"div",2)(1,"div",25)(2,"label",26),e.EFF(3),e.k0s(),e.j41(4,"div",27),e.nrm(5,"img",28),e.k0s()()()),2&i){const r=e.XpG();e.R7$(3),e.JRh(r.isViewMode()?"Image":"Current Image"),e.R7$(2),e.Y8G("src",r.baseUrl+r.partner.main_image,e.B4B)("alt",r.partner.en_alt_image)}}function V(i,o){1&i&&(e.j41(0,"span",32),e.EFF(1,"*"),e.k0s())}function x(i,o){1&i&&(e.j41(0,"div",33),e.nrm(1,"i",34),e.j41(2,"p",35),e.EFF(3," Drag and drop an image here or click to select "),e.k0s()())}function G(i,o){1&i&&(e.j41(0,"small",24),e.EFF(1," Image is required for creating a new slider. "),e.k0s())}function W(i,o){if(1&i){const r=e.RV6();e.j41(0,"div",29)(1,"label",26),e.EFF(2," Upload New Image "),e.DNE(3,V,2,0,"span",30),e.k0s(),e.j41(4,"p-fileupload",31),e.bIt("onSelect",function(t){n.eBV(r);const d=e.XpG();return n.Njj(d.onImageSelect(t))}),e.DNE(5,x,4,0,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(7,G,2,0,"small",12),e.k0s()}if(2&i){const r=e.XpG();e.R7$(3),e.Y8G("ngIf",r.isCreateMode()),e.R7$(),e.Y8G("multiple",!1)("auto",!1),e.R7$(3),e.Y8G("ngIf",r.isCreateMode()&&!r.selectedFile)}}function A(i,o){if(1&i){const r=e.RV6();e.qex(0),e.j41(1,"p-button",36),e.bIt("click",function(){n.eBV(r);const t=e.XpG();return n.Njj(t.onCancel())}),e.k0s(),e.nrm(2,"p-button",37),e.bVm()}if(2&i){const r=e.XpG();e.R7$(2),e.Y8G("disabled",r.partnerForm.invalid||r.isLoading())("loading",r.isLoading())}}function B(i,o){if(1&i){const r=e.RV6();e.qex(0),e.j41(1,"p-button",36),e.bIt("click",function(){n.eBV(r);const t=e.XpG();return n.Njj(t.onCancel())}),e.k0s(),e.nrm(2,"p-button",38),e.bVm()}if(2&i){const r=e.XpG();e.R7$(2),e.Y8G("disabled",r.partnerForm.invalid||r.isLoading())("loading",r.isLoading())}}function $(i,o){if(1&i){const r=e.RV6();e.qex(0),e.j41(1,"p-button",39),e.bIt("click",function(){n.eBV(r);const t=e.XpG();return n.Njj(t.onCancel())}),e.k0s(),e.j41(2,"p-button",40),e.bIt("click",function(){n.eBV(r);const t=e.XpG();return n.Njj(t.onEditSlider())}),e.k0s(),e.bVm()}}let N=(()=>{class i{constructor(){this.partnersService=(0,n.WQX)(P.B),this.fb=(0,n.WQX)(s.ok),this.messageService=(0,n.WQX)(I.bg),this.route=(0,n.WQX)(E.nX),this.router=(0,n.WQX)(E.Ix),this.mode=(0,n.vPA)("create"),this.partnerId=(0,n.vPA)(null),this.isLoading=(0,n.vPA)(!1),this.baseUrl=b.p,this.selectedFile=null,this.isEditMode=(0,m.EW)(()=>"edit"===this.mode()),this.isCreateMode=(0,m.EW)(()=>"create"===this.mode()),this.isViewMode=(0,m.EW)(()=>"view"===this.mode()),this.isFormValid=(0,m.EW)(()=>{if(!this.partnerForm)return!1;const r=this.partnerForm.valid;return this.isCreateMode()?r&&!!this.selectedFile:r}),this.pageTitle=(0,m.EW)(()=>{switch(this.mode()){case"create":return"Create New Slider";case"edit":return"Edit Slider Mode";case"view":return"View Slider Mode";default:return"Slider Form"}}),(0,m.QZ)(()=>{this.partnerForm&&(this.isViewMode()?this.partnerForm.disable():this.partnerForm.enable())})}ngOnInit(){this.initForm(),this.setupRouteHandling()}setupRouteHandling(){this.route.data.subscribe(r=>{this.mode.set(r.mode||"create")}),this.route.params.subscribe(r=>{const a=r.id;a&&(this.partnerId.set(+a),this.loadSliderData(+a))})}initForm(){this.partnerForm=this.fb.group({en_alt_image:["",[s.k0.required]],ar_alt_image:["",[s.k0.required]],ar_client_name:["",[s.k0.required,s.k0.minLength(3)]],en_client_name:["",[s.k0.required,s.k0.minLength(3)]],active_status:["1",s.k0.required]})}loadSliderData(r){const a=r||this.partnerId()||1;this.partnersService.getPartner(a).subscribe({next:t=>{this.partner=t.data,this.partnerForm.patchValue({en_alt_image:this.partner.en_alt_image,ar_alt_image:this.partner.ar_alt_image,en_client_name:this.partner.en_client_name,ar_client_name:this.partner.ar_client_name,active_status:this.partner.active_status}),this.isLoading.set(!1)},error:t=>{console.error("Error loading partner data:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load partner data"}),this.isLoading.set(!1)}})}onImageSelect(r){const a=r.files||r.currentFiles;if(a&&a.length>0){const t=a[0];if(!t.type.startsWith("image/"))return void this.messageService.add({severity:"error",summary:"Invalid File",detail:"Please select an image file"});if(t.size>5e6)return void this.messageService.add({severity:"error",summary:"File Too Large",detail:"Please select an image smaller than 5MB"});this.selectedFile=t,this.messageService.add({severity:"success",summary:"File Selected",detail:`Image "${t.name}" selected successfully`})}}onSubmit(){if(this.partnerForm.invalid||this.isViewMode())return;this.isLoading.set(!0);const r=this.partnerForm.value;this.isCreateMode()?this.createHero(r):this.isEditMode()&&this.updateSliderHero()}createHero(r){if(!this.selectedFile)return this.messageService.add({severity:"warn",summary:"Warning",detail:"Please select an image file"}),void this.isLoading.set(!1);this.partnersService.addPartner(r,this.selectedFile).subscribe({next:a=>{console.log("Create successful:",a),this.messageService.add({severity:"success",summary:"Success",detail:"Hero created successfully"}),this.router.navigate(["/dashboard/partner"])},error:a=>{console.error("Error creating partner:",a),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to create partner"}),this.isLoading.set(!1)}})}updateSliderHero(){if(this.partnerForm.valid){this.isLoading.set(!0);const r=this.partnerForm.value;console.log(r),this.partnersService.updatePartner(this.partner.id,r,this.selectedFile||void 0).subscribe({next:a=>{console.log("Update successful:",a),this.messageService.add({severity:"success",summary:"Success",detail:"Slider updated successfully"}),this.loadSliderData()},error:a=>{console.error("Error updating partner:",a),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update partner"}),this.isLoading.set(!1)}})}else this.messageService.add({severity:"warn",summary:"Warning",detail:"Please fill all required fields correctly"})}onCancel(){this.router.navigate(["/dashboard/partners"])}onEditSlider(){this.partnerId()&&this.router.navigate(["../../edit",this.partnerId()],{relativeTo:this.route})}static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-partners-id"]],decls:40,vars:19,consts:[["empty",""],[1,"grid"],[1,"col-12"],["styleClass","shadow-2",3,"header"],[1,"p-fluid"],[3,"ngSubmit","formGroup"],[1,"grid","mt-4"],[1,"col-12","md:col-6"],[1,"text-2xl","font-bold","mb-4"],[1,"field","mb-3"],["for","en_client_name",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_client_name","formControlName","en_client_name","placeholder","Enter en client name",2,"width","100%"],["class","p-error block",4,"ngIf"],["for","en_alt_image",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_alt_image","formControlName","en_alt_image","placeholder","Enter en image alt text",1,"w-full",2,"width","100%"],[1,"col-12","md:col-6","right-side"],["for","ar_client_name",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","ar_client_name","formControlName","ar_client_name","placeholder","Enter ar client name",2,"width","100%"],["for","ar_alt_image",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","ar_alt_image","formControlName","ar_alt_image","placeholder","Enter ar image alt text",1,"w-full",2,"width","100%"],["class","col-12",4,"ngIf"],["class","field col-12",4,"ngIf"],[1,"flex","justify-content-end","gap-2","pt-3"],[4,"ngIf"],[1,"p-error","block"],[1,"field"],[1,"block","text-900","font-medium","mb-2"],[1,"border-1","border-300","border-round","p-3","text-center"],[1,"w-full","max-w-20rem","h-auto","border-round","shadow-2",2,"max-height","300px","object-fit","cover",3,"src","alt"],[1,"field","col-12"],["class","text-red-500",4,"ngIf"],["name","main_image","accept","image/*","maxFileSize","5000000","mode","advanced","chooseLabel","Choose Image","uploadLabel"," ","cancelLabel","Cancel",3,"onSelect","multiple","auto"],[1,"text-red-500"],[1,"text-center","p-4"],[1,"pi","pi-cloud-upload","text-4xl","text-300"],[1,"mt-2","mb-0"],["label","Cancel","icon","pi pi-times","severity","secondary","type","button",3,"click"],["label","Create Slider","icon","pi pi-plus","severity","primary","type","submit",3,"disabled","loading"],["label","Update Partner","icon","pi pi-check","severity","primary","type","submit",3,"disabled","loading"],["label","Back","icon","pi pi-arrow-left","severity","secondary","type","button",3,"click"],["label","Edit","icon","pi pi-pencil","severity","primary","type","button",3,"click"]],template:function(a,t){if(1&a&&(e.j41(0,"div",1)(1,"div",2)(2,"p-card",3)(3,"div",4)(4,"form",5),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(5,"div",6)(6,"div",7)(7,"h2",8),e.EFF(8,"English content"),e.k0s(),e.j41(9,"div",9)(10,"label",10),e.EFF(11," Client Name "),e.k0s(),e.nrm(12,"input",11),e.DNE(13,R,2,0,"small",12),e.k0s(),e.j41(14,"div",9)(15,"label",13),e.EFF(16," Alt Text "),e.k0s(),e.nrm(17,"input",14),e.DNE(18,S,2,0,"small",12),e.k0s()(),e.j41(19,"div",15)(20,"h2",8),e.EFF(21,"Arabic content"),e.k0s(),e.j41(22,"div",9)(23,"label",16),e.EFF(24," Client Name "),e.k0s(),e.nrm(25,"input",17),e.DNE(26,j,2,0,"small",12),e.k0s(),e.j41(27,"div",9)(28,"label",18),e.EFF(29," Alt Text "),e.k0s(),e.nrm(30,"input",19),e.DNE(31,L,2,0,"small",12),e.k0s()(),e.DNE(32,O,6,3,"div",20)(33,W,8,4,"div",21),e.j41(34,"div",2)(35,"div",22),e.DNE(36,A,3,2,"ng-container",23)(37,B,3,2,"ng-container",23)(38,$,3,0,"ng-container",23),e.k0s()()()()()()()(),e.nrm(39,"p-toast")),2&a){let d,_,c,u,p,g,h,f;e.R7$(2),e.Y8G("header",t.pageTitle()),e.R7$(2),e.Y8G("formGroup",t.partnerForm),e.R7$(8),e.AVh("ng-invalid",(null==(d=t.partnerForm.get("en_client_name"))?null:d.invalid)&&(null==(d=t.partnerForm.get("en_client_name"))?null:d.touched)),e.R7$(),e.Y8G("ngIf",(null==(_=t.partnerForm.get("en_client_name"))?null:_.invalid)&&(null==(_=t.partnerForm.get("en_client_name"))?null:_.touched)&&!t.isViewMode()),e.R7$(4),e.AVh("ng-invalid",(null==(c=t.partnerForm.get("en_alt_image"))?null:c.invalid)&&(null==(c=t.partnerForm.get("en_alt_image"))?null:c.touched)),e.R7$(),e.Y8G("ngIf",(null==(u=t.partnerForm.get("en_alt_image"))?null:u.invalid)&&(null==(u=t.partnerForm.get("en_alt_image"))?null:u.touched)&&!t.isViewMode()),e.R7$(7),e.AVh("ng-invalid",(null==(p=t.partnerForm.get("ar_client_name"))?null:p.invalid)&&(null==(p=t.partnerForm.get("ar_client_name"))?null:p.touched)),e.R7$(),e.Y8G("ngIf",(null==(g=t.partnerForm.get("ar_title"))?null:g.invalid)&&(null==(g=t.partnerForm.get("ar_title"))?null:g.touched)&&!t.isViewMode()),e.R7$(4),e.AVh("ng-invalid",(null==(h=t.partnerForm.get("ar_alt_image"))?null:h.invalid)&&(null==(h=t.partnerForm.get("ar_alt_image"))?null:h.touched)),e.R7$(),e.Y8G("ngIf",(null==(f=t.partnerForm.get("ar_alt_image"))?null:f.invalid)&&(null==(f=t.partnerForm.get("ar_alt_image"))?null:f.touched)&&!t.isViewMode()),e.R7$(),e.Y8G("ngIf",null==t.partner?null:t.partner.main_image),e.R7$(),e.Y8G("ngIf",!t.isViewMode()),e.R7$(3),e.Y8G("ngIf",t.isCreateMode()),e.R7$(),e.Y8G("ngIf",t.isEditMode()),e.R7$(),e.Y8G("ngIf",t.isViewMode())}},dependencies:[F.Y,M.ef,y.bT,T.$n,D.Sm,k.Zp,C.y8,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],styles:[".p-fileupload-upload-button{display:none!important}  .p-fileupload-file-badge{display:none!important}  .ql-disabled .ql-editor{background-color:#cbd5e1!important;color:#475569}  .ql-editor .ql-direction-rtl{text-align:right!important}"]})}return i})()}}]);