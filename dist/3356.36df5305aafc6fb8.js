"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[3356],{3356:(X,v,s)=>{s.r(v),s.d(v,{HeroDetails:()=>K});var E=s(2200),a=s(8728),m=s(3597),o=s(4341),b=s(9211),k=s(1256),T=s(413),y=s(202),S=s(9200),F=s(5779),D=s(1020),j=s(5506),M=s(4781),I=s(1914),R=s(1314),C=s(886),e=s(3664);const P=()=>({p:"margin-bottom:0 !important;"}),L=(r,n)=>({readonly:r,height:300,direction:"ltr",defaultStyle:n}),O=r=>({readonly:r,height:300,direction:"rtl"});function V(r,n){1&r&&(e.j41(0,"small",31),e.EFF(1," Title is required and must be at least 3 characters long. "),e.k0s())}function x(r,n){1&r&&(e.j41(0,"small",31),e.EFF(1," Alt text is required. "),e.k0s())}function W(r,n){1&r&&(e.j41(0,"small",31),e.EFF(1," Title is required and must be at least 3 characters long. "),e.k0s())}function A(r,n){1&r&&(e.j41(0,"small",31),e.EFF(1," Alt text is required. "),e.k0s())}function B(r,n){1&r&&(e.j41(0,"span",36),e.EFF(1,"*"),e.k0s())}function G(r,n){1&r&&(e.j41(0,"div",37),e.nrm(1,"i",38),e.j41(2,"p",39),e.EFF(3," Drag and drop an image here or click to select "),e.k0s()())}function N(r,n){1&r&&(e.j41(0,"small",31),e.EFF(1," Image is required for creating a new slider. "),e.k0s())}function H(r,n){if(1&r){const i=e.RV6();e.j41(0,"div",32)(1,"label",33),e.EFF(2," Upload New Image "),e.DNE(3,B,2,0,"span",34),e.k0s(),e.j41(4,"p-fileupload",35),e.bIt("onSelect",function(t){a.eBV(i);const d=e.XpG();return a.Njj(d.onImageSelect(t))}),e.DNE(5,G,4,0,"ng-template",null,0,e.C5r),e.k0s(),e.nVh(7,N,2,0,"small",31),e.k0s()}if(2&r){const i=e.XpG();e.R7$(3),e.Y8G("ngIf",i.isCreateMode()),e.R7$(),e.Y8G("multiple",!1)("auto",!1),e.R7$(3),e.vxM(i.isCreateMode()&&!i.selectedFile?7:-1)}}function $(r,n){if(1&r&&(e.j41(0,"div",2)(1,"div",40)(2,"label",33),e.EFF(3),e.k0s(),e.j41(4,"div",41),e.nrm(5,"img",42),e.k0s()()()),2&r){const i=e.XpG();e.R7$(3),e.JRh(i.isViewMode()?"Image":"Current Image"),e.R7$(2),e.Y8G("src",i.baseUrl+i.slider.main_image,e.B4B)("alt",i.slider.en_alt_image)}}function U(r,n){if(1&r){const i=e.RV6();e.qex(0),e.j41(1,"p-button",43),e.bIt("click",function(){a.eBV(i);const t=e.XpG();return a.Njj(t.onCancel())}),e.k0s(),e.nrm(2,"p-button",44),e.bVm()}if(2&r){const i=e.XpG();e.R7$(2),e.Y8G("disabled",i.heroForm.invalid||i.isLoading())("loading",i.isLoading())}}function w(r,n){if(1&r){const i=e.RV6();e.qex(0),e.j41(1,"p-button",43),e.bIt("click",function(){a.eBV(i);const t=e.XpG();return a.Njj(t.onCancel())}),e.k0s(),e.nrm(2,"p-button",45),e.bVm()}if(2&r){const i=e.XpG();e.R7$(2),e.Y8G("disabled",i.heroForm.invalid||i.isLoading())("loading",i.isLoading())}}function Y(r,n){if(1&r){const i=e.RV6();e.qex(0),e.j41(1,"p-button",46),e.bIt("click",function(){a.eBV(i);const t=e.XpG();return a.Njj(t.onCancel())}),e.k0s(),e.j41(2,"p-button",47),e.bIt("click",function(){a.eBV(i);const t=e.XpG();return a.Njj(t.onEditSlider())}),e.k0s(),e.bVm()}}let K=(()=>{class r{constructor(){this.heroService=(0,a.WQX)(T.w),this.projectsService=(0,a.WQX)(y.i),this.fb=(0,a.WQX)(o.ok),this.messageService=(0,a.WQX)(F.bg),this.route=(0,a.WQX)(b.nX),this.router=(0,a.WQX)(b.Ix),this.mode=(0,a.vPA)("create"),this.heroId=(0,a.vPA)(null),this.isLoading=(0,a.vPA)(!1),this.projectListName=(0,a.vPA)([]),this.baseUrl=k.p,this.selectedFile=null,this.isEditMode=(0,m.EW)(()=>"edit"===this.mode()),this.isCreateMode=(0,m.EW)(()=>"create"===this.mode()),this.isViewMode=(0,m.EW)(()=>"view"===this.mode()),this.isFormValid=(0,m.EW)(()=>{if(!this.heroForm)return!1;const i=this.heroForm.valid;return this.isCreateMode()?i&&!!this.selectedFile:i}),this.pageTitle=(0,m.EW)(()=>{switch(this.mode()){case"create":return"Create New Slider";case"edit":return"Edit Slider Mode";case"view":return"View Slider Mode";default:return"Slider Form"}}),(0,m.QZ)(()=>{this.heroForm&&(this.isViewMode()?this.heroForm.disable():this.heroForm.enable())})}ngOnInit(){this.initForm(),this.setupRouteHandling(),this.getProjectListName()}setupRouteHandling(){this.route.data.subscribe(i=>{this.mode.set(i.mode||"create")}),this.route.params.subscribe(i=>{const l=i.id;l&&(this.heroId.set(+l),this.loadSliderData(+l))})}initForm(){this.heroForm=this.fb.group({en_title:["",[o.k0.required,o.k0.minLength(3)]],ar_title:["",[o.k0.required,o.k0.minLength(3)]],en_alt_image:["",[o.k0.required]],ar_alt_image:["",[o.k0.required]],en_description:["",[o.k0.required,o.k0.minLength(3)]],ar_description:["",[o.k0.required,o.k0.minLength(3)]],active_status:["1",o.k0.required],project_id:["",o.k0.required]})}loadSliderData(i){const l=i||this.heroId()||1;this.heroService.getSlider(l).subscribe({next:t=>{this.slider=t.data,this.heroForm.patchValue({en_title:t.data.en_title,en_alt_image:t.data.en_alt_image,ar_title:t.data.ar_title,ar_description:t.data.ar_description,ar_alt_image:t.data.ar_alt_image,en_description:t.data.en_description,active_status:t.data.active_status,project_id:t.data.project_id}),console.log(this.slider),this.isLoading.set(!1)},error:t=>{console.error("Error loading slider data:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load slider data"}),this.isLoading.set(!1)}})}getProjectListName(){this.projectsService.getProjectListName().subscribe(i=>{this.projectListName.set(i.projects)})}onImageSelect(i){const l=i.files||i.currentFiles;if(l&&l.length>0){const t=l[0];if(!t.type.startsWith("image/"))return void this.messageService.add({severity:"error",summary:"Invalid File",detail:"Please select an image file"});if(t.size>5e6)return void this.messageService.add({severity:"error",summary:"File Too Large",detail:"Please select an image smaller than 5MB"});this.selectedFile=t,this.messageService.add({severity:"success",summary:"File Selected",detail:`Image "${t.name}" selected successfully`})}}onSubmit(){if(this.heroForm.invalid||this.isViewMode())return;console.log(this.heroForm.value),this.isLoading.set(!0);const i=this.heroForm.value;this.isCreateMode()?this.createHero(i):this.isEditMode()&&this.updateSliderHero()}createHero(i){if(!this.selectedFile)return this.messageService.add({severity:"warn",summary:"Warning",detail:"Please select an image file"}),void this.isLoading.set(!1);this.heroService.addSlider(i,this.selectedFile).subscribe({next:l=>{console.log("Create successful:",l),this.messageService.add({severity:"success",summary:"Success",detail:"Hero created successfully"}),this.router.navigate(["/dashboard/hero"])},error:l=>{console.error("Error creating hero:",l),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to create hero"}),this.isLoading.set(!1)}})}updateSliderHero(){if(this.heroForm.valid){this.isLoading.set(!0);const i=this.heroForm.value;console.log(i),this.heroService.updateSlider(this.slider.id,i,this.selectedFile||void 0).subscribe({next:l=>{console.log("Update successful:",l),this.messageService.add({severity:"success",summary:"Success",detail:"Slider updated successfully"}),this.loadSliderData()},error:l=>{console.error("Error updating slider:",l),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update slider"}),this.isLoading.set(!1)}})}else this.messageService.add({severity:"warn",summary:"Warning",detail:"Please fill all required fields correctly"})}onCancel(){this.router.navigate(["/dashboard/hero"])}onEditSlider(){this.heroId()&&this.router.navigate(["../../edit",this.heroId()],{relativeTo:this.route})}static#e=this.\u0275fac=function(l){return new(l||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-hero-details"]],features:[e.Jv_([F.bg])],decls:51,vars:28,consts:[["empty",""],[1,"grid"],[1,"col-12"],["styleClass","shadow-2",3,"header"],[1,"p-fluid"],[3,"ngSubmit","formGroup"],[1,"grid","mt-4"],[1,"col-12","md:col-6"],[1,"text-2xl","font-bold","mb-4"],[1,"field","mb-3"],["for","en_title",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_title","formControlName","en_title","placeholder","Enter en slider title",2,"width","100%"],["class","p-error block",4,"ngIf"],["for","en_description",1,"block","text-900","font-medium","mb-2"],[1,"card"],["placeholder","Enter en slider description","formControlName","en_description",3,"options"],["for","en_alt_image",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_alt_image","formControlName","en_alt_image","placeholder","Enter en image alt text",1,"w-full",2,"width","100%"],[1,"col-12","md:col-6","right-side"],["for","ar_title",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","ar_title","formControlName","ar_title","placeholder","Enter ar slider title",2,"width","100%"],["for","ar_description",1,"block","text-900","font-medium","mb-2"],["placeholder","Enter ar slider description","formControlName","ar_description",3,"options"],["for","ar_alt_image",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","ar_alt_image","formControlName","ar_alt_image","placeholder","Enter ar image alt text",1,"w-full",2,"width","100%"],["for","project_id",1,"block","text-900","font-medium","mb-2"],["formControlName","project_id","optionLabel","project_name","optionValue","id","placeholder","Select Project",2,"width","100%",3,"options"],["class","field col-12",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"flex","justify-content-end","gap-2","pt-3"],[4,"ngIf"],[1,"p-error","block"],[1,"field","col-12"],[1,"block","text-900","font-medium","mb-2"],["class","text-red-500",4,"ngIf"],["name","main_image","accept","image/*","maxFileSize","5000000","mode","advanced","chooseLabel","Choose Image","uploadLabel"," ","cancelLabel","Cancel",3,"onSelect","multiple","auto"],[1,"text-red-500"],[1,"text-center","p-4"],[1,"pi","pi-cloud-upload","text-4xl","text-300"],[1,"mt-2","mb-0"],[1,"field"],[1,"border-1","border-300","border-round","p-3","text-center"],[1,"w-full","max-w-20rem","h-auto","border-round","shadow-2",2,"max-height","300px","object-fit","cover",3,"src","alt"],["label","Cancel","icon","pi pi-times","severity","secondary","type","button",3,"click"],["label","Create Slider","icon","pi pi-plus","severity","primary","type","submit",3,"disabled","loading"],["label","Update Slider","icon","pi pi-check","severity","primary","type","submit",3,"disabled","loading"],["label","Back","icon","pi pi-arrow-left","severity","secondary","type","button",3,"click"],["label","Edit","icon","pi pi-pencil","severity","primary","type","button",3,"click"]],template:function(l,t){if(1&l&&(e.j41(0,"div",1)(1,"div",2)(2,"p-card",3)(3,"div",4)(4,"form",5),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(5,"div",6)(6,"div",7)(7,"h2",8),e.EFF(8,"English content"),e.k0s(),e.j41(9,"div",9)(10,"label",10),e.EFF(11," Title "),e.k0s(),e.nrm(12,"input",11),e.DNE(13,V,2,0,"small",12),e.k0s(),e.j41(14,"label",13),e.EFF(15," description "),e.k0s(),e.j41(16,"div",14),e.nrm(17,"ngx-jodit",15),e.k0s(),e.j41(18,"div",9)(19,"label",16),e.EFF(20," Alt Text "),e.k0s(),e.nrm(21,"input",17),e.DNE(22,x,2,0,"small",12),e.k0s()(),e.j41(23,"div",18)(24,"h2",8),e.EFF(25,"Arabic content"),e.k0s(),e.j41(26,"div",9)(27,"label",19),e.EFF(28," Title "),e.k0s(),e.nrm(29,"input",20),e.DNE(30,W,2,0,"small",12),e.k0s(),e.j41(31,"label",21),e.EFF(32," description "),e.k0s(),e.j41(33,"div",14),e.nrm(34,"ngx-jodit",22),e.k0s(),e.j41(35,"div",9)(36,"label",23),e.EFF(37," Alt Text "),e.k0s(),e.nrm(38,"input",24),e.DNE(39,A,2,0,"small",12),e.k0s()(),e.j41(40,"div",2)(41,"label",25),e.EFF(42," Project Name "),e.k0s(),e.nrm(43,"p-select",26),e.k0s(),e.DNE(44,H,8,4,"div",27)(45,$,6,3,"div",28),e.j41(46,"div",2)(47,"div",29),e.DNE(48,U,3,2,"ng-container",30)(49,w,3,2,"ng-container",30)(50,Y,3,0,"ng-container",30),e.k0s()()()()()()()()),2&l){let d,c,_,u,h,p,g,f;e.R7$(2),e.Y8G("header",t.pageTitle()),e.R7$(2),e.Y8G("formGroup",t.heroForm),e.R7$(8),e.AVh("ng-invalid",(null==(d=t.heroForm.get("en_title"))?null:d.invalid)&&(null==(d=t.heroForm.get("en_title"))?null:d.touched)),e.R7$(),e.Y8G("ngIf",(null==(c=t.heroForm.get("en_title"))?null:c.invalid)&&(null==(c=t.heroForm.get("en_title"))?null:c.touched)&&!t.isViewMode()),e.R7$(4),e.Y8G("options",e.l_i(23,L,t.isViewMode(),e.lJ4(22,P))),e.R7$(4),e.AVh("ng-invalid",(null==(_=t.heroForm.get("en_alt_image"))?null:_.invalid)&&(null==(_=t.heroForm.get("en_alt_image"))?null:_.touched)),e.R7$(),e.Y8G("ngIf",(null==(u=t.heroForm.get("en_alt_image"))?null:u.invalid)&&(null==(u=t.heroForm.get("en_alt_image"))?null:u.touched)&&!t.isViewMode()),e.R7$(7),e.AVh("ng-invalid",(null==(h=t.heroForm.get("ar_title"))?null:h.invalid)&&(null==(h=t.heroForm.get("ar_title"))?null:h.touched)),e.R7$(),e.Y8G("ngIf",(null==(p=t.heroForm.get("ar_title"))?null:p.invalid)&&(null==(p=t.heroForm.get("ar_title"))?null:p.touched)&&!t.isViewMode()),e.R7$(4),e.Y8G("options",e.eq3(26,O,t.isViewMode())),e.R7$(4),e.AVh("ng-invalid",(null==(g=t.heroForm.get("ar_alt_image"))?null:g.invalid)&&(null==(g=t.heroForm.get("ar_alt_image"))?null:g.touched)),e.R7$(),e.Y8G("ngIf",(null==(f=t.heroForm.get("ar_alt_image"))?null:f.invalid)&&(null==(f=t.heroForm.get("ar_alt_image"))?null:f.touched)&&!t.isViewMode()),e.R7$(4),e.Y8G("options",t.projectListName()),e.R7$(),e.Y8G("ngIf",!t.isViewMode()),e.R7$(),e.Y8G("ngIf",null==t.slider?null:t.slider.main_image),e.R7$(3),e.Y8G("ngIf",t.isCreateMode()),e.R7$(),e.Y8G("ngIf",t.isEditMode()),e.R7$(),e.Y8G("ngIf",t.isViewMode())}},dependencies:[M.eB,M.ef,E.MD,E.bT,D.tm,D.$n,I.um,I.Sm,j.Dw,j.Zp,C.MB,o.YN,o.qT,o.me,o.BC,o.cb,o.X1,o.j4,o.JD,R.l6,S.V],styles:[".p-fileupload-upload-button{display:none!important}  .p-fileupload-file-badge{display:none!important}  .ql-disabled .ql-editor{background-color:#cbd5e1!important;color:#475569}.rtl-editor[_ngcontent-%COMP%]     .ql-editor{text-align:right!important}"]})}return r})()}}]);