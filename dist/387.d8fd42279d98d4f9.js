"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[387],{387:(W,c,s)=>{s.r(c),s.d(c,{FeaturesId:()=>V});var h=s(2200),o=s(8728),l=s(3597),n=s(4341),g=s(9211),I=s(1256),y=s(9200),p=s(5779),E=s(1020),v=s(5506),D=s(4781),b=s(1914),F=s(886),P=s(7586),e=s(3664);const M=r=>({backgroundColor:r}),T=r=>({readonly:r,height:300,direction:"ltr"}),C=r=>({readonly:r,height:300,direction:"rtl"});function O(r,u){1&r&&(e.j41(0,"small",22),e.EFF(1," Title is required and must be at least 3 characters long. "),e.k0s())}function L(r,u){1&r&&(e.j41(0,"small",22),e.EFF(1," Title is required and must be at least 3 characters long. "),e.k0s())}function R(r,u){if(1&r&&(e.qex(0),e.nrm(1,"p-button",23),e.bVm()),2&r){const i=e.XpG();e.R7$(),e.Y8G("disabled",i.featureForm.invalid||i.isLoading())("loading",i.isLoading())}}function k(r,u){if(1&r&&(e.qex(0),e.nrm(1,"p-button",24),e.bVm()),2&r){const i=e.XpG();e.R7$(),e.Y8G("disabled",i.featureForm.invalid||i.isLoading())("loading",i.isLoading())}}function S(r,u){if(1&r){const i=e.RV6();e.qex(0),e.j41(1,"p-button",25),e.bIt("click",function(){o.eBV(i);const t=e.XpG();return o.Njj(t.onCancel())}),e.k0s(),e.j41(2,"p-button",26),e.bIt("click",function(){o.eBV(i);const t=e.XpG();return o.Njj(t.onEditSlider())}),e.k0s(),e.bVm()}}let V=(()=>{class r{constructor(){this.featureService=(0,o.WQX)(P.X),this.fb=(0,o.WQX)(n.ok),this.messageService=(0,o.WQX)(p.bg),this.route=(0,o.WQX)(g.nX),this.router=(0,o.WQX)(g.Ix),this.mode=(0,o.vPA)("create"),this.featureId=(0,o.vPA)(null),this.isLoading=(0,o.vPA)(!1),this.baseUrl=I.p,this.isEditMode=(0,l.EW)(()=>"edit"===this.mode()),this.isCreateMode=(0,l.EW)(()=>"create"===this.mode()),this.isViewMode=(0,l.EW)(()=>"view"===this.mode()),this.isFormValid=(0,l.EW)(()=>{if(!this.feature)return!1;const i=this.featureForm.valid;return this.isCreateMode(),i}),this.pageTitle=(0,l.EW)(()=>{switch(this.mode()){case"create":return"Create New feature";case"edit":return"Edit feature Mode";case"view":return"View feature Mode";default:return"feature Form"}}),(0,l.QZ)(()=>{this.feature&&(this.isViewMode()?this.featureForm.disable():this.featureForm.enable())})}ngOnInit(){this.initForm(),this.setupRouteHandling()}setupRouteHandling(){this.route.data.subscribe(i=>{this.mode.set(i.mode||"create")}),this.route.params.subscribe(i=>{const a=i.id;a&&(this.featureId.set(+a),this.loadSliderData(+a))})}initForm(){this.featureForm=this.fb.group({en_feature_title:["",[n.k0.required,n.k0.minLength(3)]],ar_feature_title:["",[n.k0.required,n.k0.minLength(3)]],en_feature_text:["",[n.k0.required,n.k0.minLength(3)]],ar_feature_text:["",[n.k0.required,n.k0.minLength(3)]]})}loadSliderData(i){const a=i||this.featureId()||1;this.featureService.getFeature(a).subscribe({next:t=>{this.feature=t.data,this.featureForm.patchValue({en_feature_title:t.data.en_feature_title,en_feature_text:t.data.en_feature_text,ar_feature_title:t.data.ar_feature_title,ar_feature_text:t.data.ar_feature_text}),this.isLoading.set(!1)},error:t=>{console.error("Error loading slider data:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load slider data"}),this.isLoading.set(!1)}})}onSubmit(){if(this.featureForm.invalid||this.isViewMode())return;this.isLoading.set(!0);const i=this.featureForm.value;this.isCreateMode()?this.createFeature(i):this.isEditMode()&&this.updateSliderHero()}createFeature(i){this.featureService.addFeature(i).subscribe({next:a=>{console.log("Create successful:",a),this.messageService.add({severity:"success",summary:"Success",detail:"Hero created successfully"}),this.router.navigate(["/dashboard/features"])},error:a=>{console.error("Error creating features:",a),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to create features"}),this.isLoading.set(!1)}})}updateSliderHero(){this.featureForm.valid?(this.isLoading.set(!0),this.featureService.updateFeature(this.feature.id,this.featureForm.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"feature updated successfully"}),this.isLoading.set(!1)},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update slider"}),this.isLoading.set(!1)}})):this.messageService.add({severity:"warn",summary:"Warning",detail:"Please fill all required fields correctly"})}onCancel(){this.router.navigate(["/dashboard/features"])}onEditSlider(){this.featureId()&&this.router.navigate(["../../edit",this.featureId()],{relativeTo:this.route})}static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-features-id"]],features:[e.Jv_([p.bg])],decls:36,vars:27,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-2",3,"header"],[1,"p-fluid"],[3,"ngSubmit","formGroup"],[1,"grid","mt-4"],[1,"col-12","md:col-6"],[1,"text-2xl","font-bold","mb-4"],[1,"field","mb-3"],["for","en_title",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_feature_title","formControlName","en_feature_title","placeholder","Enter en slider title",2,"width","100%",3,"readonly"],["class","p-error block",4,"ngIf"],["for","en_feature_text",1,"block","text-900","font-medium","mb-2"],[1,"card"],["placeholder","Enter en slider description","formControlName","en_feature_text",3,"options"],[1,"col-12","md:col-6","right-side"],["for","ar_feature_title",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","ar_feature_title","formControlName","ar_feature_title","placeholder","Enter ar slider title",2,"width","100%",3,"readonly"],["for","ar_feature_text",1,"block","text-900","font-medium","mb-2"],["placeholder","Enter ar slider description","formControlName","ar_feature_text",3,"options"],[1,"flex","justify-content-end","gap-2","pt-3"],[4,"ngIf"],[1,"p-error","block"],["label","Create Slider","icon","pi pi-plus","severity","primary","type","submit",3,"disabled","loading"],["label","Update Feature","icon","pi pi-check","severity","primary","type","submit",3,"disabled","loading"],["label","Back","icon","pi pi-arrow-left","severity","secondary","type","button",3,"click"],["label","Edit","icon","pi pi-pencil","severity","primary","type","button",3,"click"]],template:function(a,t){if(1&a&&(e.j41(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"div",3)(4,"form",4),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(5,"div",5)(6,"div",6)(7,"h2",7),e.EFF(8,"English content"),e.k0s(),e.j41(9,"div",8)(10,"label",9),e.EFF(11," Title "),e.k0s(),e.nrm(12,"input",10),e.DNE(13,O,2,0,"small",11),e.k0s(),e.j41(14,"label",12),e.EFF(15," description "),e.k0s(),e.j41(16,"div",13),e.nrm(17,"ngx-jodit",14),e.k0s()(),e.j41(18,"div",15)(19,"h2",7),e.EFF(20,"Arabic content"),e.k0s(),e.j41(21,"div",8)(22,"label",16),e.EFF(23," Title "),e.k0s(),e.nrm(24,"input",17),e.DNE(25,L,2,0,"small",11),e.k0s(),e.j41(26,"label",18),e.EFF(27," description "),e.k0s(),e.j41(28,"div",13),e.nrm(29,"ngx-jodit",19),e.k0s()(),e.j41(30,"div",1)(31,"div",20),e.DNE(32,R,2,2,"ng-container",21)(33,k,2,2,"ng-container",21)(34,S,3,0,"ng-container",21),e.k0s()()()()()()()(),e.nrm(35,"p-toast")),2&a){let d,_,f,m;e.R7$(2),e.Y8G("header",t.pageTitle()),e.R7$(2),e.Y8G("formGroup",t.featureForm),e.R7$(8),e.Aen(e.eq3(19,M,t.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(d=t.featureForm.get("en_feature_title"))?null:d.invalid)&&(null==(d=t.featureForm.get("en_feature_title"))?null:d.touched)),e.Y8G("readonly",t.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(_=t.featureForm.get("en_feature_title"))?null:_.invalid)&&(null==(_=t.featureForm.get("en_feature_title"))?null:_.touched)&&!t.isViewMode()),e.R7$(4),e.Y8G("options",e.eq3(21,T,t.isViewMode())),e.R7$(7),e.Aen(e.eq3(23,M,t.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(f=t.featureForm.get("ar_feature_title"))?null:f.invalid)&&(null==(f=t.featureForm.get("ar_feature_title"))?null:f.touched)),e.Y8G("readonly",t.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(m=t.featureForm.get("ar_feature_title"))?null:m.invalid)&&(null==(m=t.featureForm.get("ar_feature_title"))?null:m.touched)&&!t.isViewMode()),e.R7$(4),e.Y8G("options",e.eq3(25,C,t.isViewMode())),e.R7$(3),e.Y8G("ngIf",t.isCreateMode()),e.R7$(),e.Y8G("ngIf",t.isEditMode()),e.R7$(),e.Y8G("ngIf",t.isViewMode())}},dependencies:[D.eB,h.MD,h.bT,E.tm,E.$n,b.um,b.Sm,v.Dw,v.Zp,F.MB,F.y8,y.V,n.YN,n.qT,n.me,n.BC,n.cb,n.X1,n.j4,n.JD],styles:[".p-fileupload-upload-button{display:none!important}  .p-fileupload-file-badge{display:none!important}  .ql-disabled .ql-editor{background-color:#cbd5e1!important;color:#475569}.rtl-editor[_ngcontent-%COMP%]     .ql-editor{text-align:right!important}"]})}return r})()}}]);