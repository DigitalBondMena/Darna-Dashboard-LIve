"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[4429],{4429:(re,R,t)=>{t.r(R),t.d(R,{CareersFormId:()=>ee});var n=t(8728),M=t(3597),o=t(4341),A=t(9211),w=t(1256),T=t(6677),D=t(5779),V=t(1274),j=t(1746),e=t(3664),P=t(2200),O=t(1020),G=t(1914),$=t(5506),S=t(4176),N=t(886);const m=a=>({backgroundColor:a}),Y=a=>({backgroundColor:a,height:"80px"}),L=a=>({backgroundColor:a,height:"150px"});function W(a,s){1&a&&(e.j41(0,"small",30),e.EFF(1," Name is required and must be at least 2 characters long. "),e.k0s())}function B(a,s){1&a&&(e.j41(0,"small",30),e.EFF(1," Valid email address is required. "),e.k0s())}function U(a,s){1&a&&(e.j41(0,"small",30),e.EFF(1," Phone number is required. "),e.k0s())}function x(a,s){1&a&&(e.j41(0,"small",30),e.EFF(1," Address is required. "),e.k0s())}function K(a,s){1&a&&(e.j41(0,"small",30),e.EFF(1," Experience is required. "),e.k0s())}function X(a,s){1&a&&(e.j41(0,"small",30),e.EFF(1," Current salary is required. "),e.k0s())}function q(a,s){1&a&&(e.j41(0,"small",30),e.EFF(1," Expected salary is required. "),e.k0s())}function Q(a,s){if(1&a&&(e.j41(0,"div",31)(1,"label",32),e.EFF(2," Application Status "),e.k0s(),e.nrm(3,"p-tag",33),e.k0s()),2&a){const l=e.XpG();e.R7$(3),e.Y8G("value",l.getReadStatus())("severity",l.getReadStatusSeverity())}}function z(a,s){if(1&a&&(e.j41(0,"div",8)(1,"label",34),e.EFF(2," Applied Position ID "),e.k0s(),e.j41(3,"p",35),e.EFF(4),e.k0s(),e.j41(5,"small",36),e.EFF(6," *Career details will be displayed here in future updates "),e.k0s()()),2&a){const l=e.XpG();e.R7$(4),e.SpI(" ",l.careerForm.career_id," ")}}function J(a,s){1&a&&(e.j41(0,"small",30),e.EFF(1," Cover letter is required. "),e.k0s())}function Z(a,s){if(1&a){const l=e.RV6();e.j41(0,"div",8)(1,"label",34),e.EFF(2," CV/Resume "),e.k0s(),e.j41(3,"div",37)(4,"div",38)(5,"div",39),e.nrm(6,"i",40),e.j41(7,"div")(8,"p",41),e.EFF(9),e.k0s(),e.j41(10,"small",36),e.EFF(11,"CV/Resume document"),e.k0s()()(),e.j41(12,"p-button",42),e.bIt("click",function(){n.eBV(l);const r=e.XpG();return n.Njj(r.downloadCV())}),e.k0s()()()()}if(2&a){const l=e.XpG();e.R7$(9),e.SpI(" ",l.careerForm.cv_file.split("/").pop()," ")}}function H(a,s){if(1&a){const l=e.RV6();e.qex(0),e.j41(1,"p-button",43),e.bIt("click",function(){n.eBV(l);const r=e.XpG();return n.Njj(r.onCancel())}),e.k0s(),e.bVm()}}let ee=(()=>{class a{constructor(){this.careersFormService=(0,n.WQX)(j.t),this.fb=(0,n.WQX)(o.ok),this.messageService=(0,n.WQX)(D.bg),this.route=(0,n.WQX)(A.nX),this.router=(0,n.WQX)(A.Ix),this.mode=(0,n.vPA)("view"),this.careerFormId=(0,n.vPA)(null),this.isLoading=(0,n.vPA)(!1),this.baseUrl=w.p,this.isViewMode=(0,M.EW)(()=>"view"===this.mode()),this.pageTitle=(0,M.EW)(()=>"view"===this.mode()?"View Career Application":"Career Application"),this.routeEffect=(0,M.QZ)(()=>{const i=this.route.snapshot.data.mode;i&&this.mode.set(i);const r=this.route.snapshot.paramMap.get("id");r&&(this.careerFormId.set(+r),this.loadCareerForm(+r))})}ngOnInit(){this.initializeForm()}initializeForm(){this.careerFormForm=this.fb.group({name:["",[o.k0.required,o.k0.minLength(2)]],email:["",[o.k0.required,o.k0.email]],phone:["",[o.k0.required]],address:["",[o.k0.required]],experience:["",[o.k0.required]],current_salary:["",[o.k0.required]],expected_salary:["",[o.k0.required]],cover_letter:["",[o.k0.required]],is_read:[0]})}loadCareerForm(l){this.isLoading.set(!0),this.careersFormService.getCareersForm(l).subscribe({next:i=>{this.careerForm=i.data,this.populateForm(),this.isLoading.set(!1),0===this.careerForm.is_read&&this.markAsRead(l)},error:i=>{console.error("Error loading career form:",i),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load career application"}),this.isLoading.set(!1)}})}populateForm(){this.careerForm&&this.careerFormForm.patchValue({name:this.careerForm.name,email:this.careerForm.email,phone:this.careerForm.phone,address:this.careerForm.address,experience:this.careerForm.experience,current_salary:this.careerForm.current_salary,expected_salary:this.careerForm.expected_salary,cover_letter:this.careerForm.cover_letter,is_read:this.careerForm.is_read})}markAsRead(l){this.careersFormService.markAsRead(l).subscribe({next:()=>{this.careerForm&&(this.careerForm.is_read=1)},error:i=>{console.error("Error marking as read:",i)}})}onSubmit(){if(this.careerFormForm.valid&&this.careerFormId()){this.isLoading.set(!0);const l=this.careerFormForm.value;this.careersFormService.updateCareersForm(this.careerFormId(),l).subscribe({next:i=>{this.careerForm=i.data,this.messageService.add({severity:"success",summary:"Success",detail:"Career application updated successfully"}),this.isLoading.set(!1),this.mode.set("view")},error:i=>{console.error("Error updating career form:",i),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update career application"}),this.isLoading.set(!1)}})}}onCancel(){this.router.navigate(["/dashboard/careers-form"])}onEditCareerForm(){this.careerFormId()&&this.router.navigate(["/dashboard/careers-form/edit",this.careerFormId()])}downloadCV(){this.careerForm?.cv_file&&window.open(this.baseUrl+this.careerForm.cv_file,"_blank")}formatSalary(l){return l?`$${l}`:"Not specified"}getReadStatus(){return 1===this.careerForm?.is_read?"Read":"Unread"}getReadStatusSeverity(){return 1===this.careerForm?.is_read?"success":"warning"}static#e=this.\u0275fac=function(i){return new(i||a)};static#r=this.\u0275cmp=e.VBU({type:a,selectors:[["app-careers-form-id"]],features:[e.Jv_([D.bg])],decls:64,vars:70,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-2",3,"header"],[1,"p-fluid"],[3,"ngSubmit","formGroup"],[1,"grid","mt-4"],[1,"col-12","md:col-6"],[1,"text-2xl","font-bold","mb-4"],[1,"field","mb-3"],["for","name",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","name","formControlName","name","placeholder","Applicant full name",2,"width","100%",3,"readonly"],["class","p-error block",4,"ngIf"],["for","email",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","email","formControlName","email","placeholder","Applicant email address",2,"width","100%",3,"readonly"],["for","phone",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","phone","formControlName","phone","placeholder","Applicant phone number",2,"width","100%",3,"readonly"],["for","address",1,"block","text-900","font-medium","mb-2"],["pInputTextarea","","id","address","clas","","formControlName","address","placeholder","Applicant address",2,"width","100%",3,"readonly"],["for","experience",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","experience","formControlName","experience","placeholder","Years of experience",2,"width","100%",3,"readonly"],["for","current_salary",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","current_salary","formControlName","current_salary","placeholder","Current salary",2,"width","100%",3,"readonly"],["for","expected_salary",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","expected_salary","formControlName","expected_salary","placeholder","Expected salary",2,"width","100%",3,"readonly"],["class","mb-3 flex align-items-center gap-2",4,"ngIf"],["class","field mb-3",4,"ngIf"],["for","cover_letter",1,"block","text-900","font-medium","mb-2"],["pInputTextarea","","id","cover_letter","formControlName","cover_letter","placeholder","Cover letter content",2,"width","100%",3,"readonly"],[1,"flex","justify-content-end","gap-2","pt-3"],[4,"ngIf"],[1,"p-error","block"],[1,"mb-3","flex","align-items-center","gap-2"],[1,"text-900","font-medium","mb-2"],[1,"text-sm",3,"value","severity"],[1,"block","text-900","font-medium","mb-2"],[1,"text-900","bg-gray-100","p-2","border-round"],[1,"text-500"],[1,"border-1","border-300","border-round","p-3"],[1,"flex","align-items-center","justify-content-between"],[1,"flex","align-items-center"],[1,"pi","pi-file-pdf","text-2xl","text-red-500","mr-3"],[1,"m-0","font-medium"],["label","Download","icon","pi pi-download","severity","secondary","size","small",3,"click"],["label","Back","icon","pi pi-arrow-left","severity","secondary","type","button",3,"click"]],template:function(i,r){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"div",3)(4,"form",4),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(5,"div",5)(6,"div",6)(7,"h2",7),e.EFF(8,"Applicant Information"),e.k0s(),e.j41(9,"div",8)(10,"label",9),e.EFF(11," Full Name "),e.k0s(),e.nrm(12,"input",10),e.DNE(13,W,2,0,"small",11),e.k0s(),e.j41(14,"div",8)(15,"label",12),e.EFF(16," Email Address "),e.k0s(),e.nrm(17,"input",13),e.DNE(18,B,2,0,"small",11),e.k0s(),e.j41(19,"div",8)(20,"label",14),e.EFF(21," Phone Number "),e.k0s(),e.nrm(22,"input",15),e.DNE(23,U,2,0,"small",11),e.k0s(),e.j41(24,"div",8)(25,"label",16),e.EFF(26," Address "),e.k0s(),e.j41(27,"textarea",17),e.EFF(28,"                "),e.k0s(),e.DNE(29,x,2,0,"small",11),e.k0s()(),e.j41(30,"div",6)(31,"h2",7),e.EFF(32,"Professional Information"),e.k0s(),e.j41(33,"div",8)(34,"label",18),e.EFF(35," Years of Experience "),e.k0s(),e.nrm(36,"input",19),e.DNE(37,K,2,0,"small",11),e.k0s(),e.j41(38,"div",8)(39,"label",20),e.EFF(40," Current Salary "),e.k0s(),e.nrm(41,"input",21),e.DNE(42,X,2,0,"small",11),e.k0s(),e.j41(43,"div",8)(44,"label",22),e.EFF(45," Expected Salary "),e.k0s(),e.nrm(46,"input",23),e.DNE(47,q,2,0,"small",11),e.k0s(),e.DNE(48,Q,4,2,"div",24)(49,z,7,1,"div",25),e.k0s(),e.j41(50,"div",1)(51,"h2",7),e.EFF(52,"Additional Information"),e.k0s(),e.j41(53,"div",8)(54,"label",26),e.EFF(55," Cover Letter "),e.k0s(),e.j41(56,"textarea",27),e.EFF(57,"                "),e.k0s(),e.DNE(58,J,2,0,"small",11),e.k0s(),e.DNE(59,Z,13,1,"div",25),e.k0s(),e.j41(60,"div",1)(61,"div",28),e.DNE(62,H,2,0,"ng-container",29),e.k0s()()()()()()()(),e.nrm(63,"p-toast")),2&i){let d,c,u,_,F,p,f,h,v,g,E,I,b,C,k,y;e.R7$(2),e.Y8G("header",r.pageTitle()),e.R7$(2),e.Y8G("formGroup",r.careerFormForm),e.R7$(8),e.Aen(e.eq3(54,m,r.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(d=r.careerFormForm.get("name"))?null:d.invalid)&&(null==(d=r.careerFormForm.get("name"))?null:d.touched)),e.Y8G("readonly",r.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(c=r.careerFormForm.get("name"))?null:c.invalid)&&(null==(c=r.careerFormForm.get("name"))?null:c.touched)&&!r.isViewMode()),e.R7$(4),e.Aen(e.eq3(56,m,r.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(u=r.careerFormForm.get("email"))?null:u.invalid)&&(null==(u=r.careerFormForm.get("email"))?null:u.touched)),e.Y8G("readonly",r.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(_=r.careerFormForm.get("email"))?null:_.invalid)&&(null==(_=r.careerFormForm.get("email"))?null:_.touched)&&!r.isViewMode()),e.R7$(4),e.Aen(e.eq3(58,m,r.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(F=r.careerFormForm.get("phone"))?null:F.invalid)&&(null==(F=r.careerFormForm.get("phone"))?null:F.touched)),e.Y8G("readonly",r.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(p=r.careerFormForm.get("phone"))?null:p.invalid)&&(null==(p=r.careerFormForm.get("phone"))?null:p.touched)&&!r.isViewMode()),e.R7$(4),e.Aen(e.eq3(60,Y,r.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(f=r.careerFormForm.get("address"))?null:f.invalid)&&(null==(f=r.careerFormForm.get("address"))?null:f.touched)),e.Y8G("readonly",r.isViewMode()),e.R7$(2),e.Y8G("ngIf",(null==(h=r.careerFormForm.get("address"))?null:h.invalid)&&(null==(h=r.careerFormForm.get("address"))?null:h.touched)&&!r.isViewMode()),e.R7$(7),e.Aen(e.eq3(62,m,r.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(v=r.careerFormForm.get("experience"))?null:v.invalid)&&(null==(v=r.careerFormForm.get("experience"))?null:v.touched)),e.Y8G("readonly",r.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(g=r.careerFormForm.get("experience"))?null:g.invalid)&&(null==(g=r.careerFormForm.get("experience"))?null:g.touched)&&!r.isViewMode()),e.R7$(4),e.Aen(e.eq3(64,m,r.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(E=r.careerFormForm.get("current_salary"))?null:E.invalid)&&(null==(E=r.careerFormForm.get("current_salary"))?null:E.touched)),e.Y8G("readonly",r.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(I=r.careerFormForm.get("current_salary"))?null:I.invalid)&&(null==(I=r.careerFormForm.get("current_salary"))?null:I.touched)&&!r.isViewMode()),e.R7$(4),e.Aen(e.eq3(66,m,r.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(b=r.careerFormForm.get("expected_salary"))?null:b.invalid)&&(null==(b=r.careerFormForm.get("expected_salary"))?null:b.touched)),e.Y8G("readonly",r.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(C=r.careerFormForm.get("expected_salary"))?null:C.invalid)&&(null==(C=r.careerFormForm.get("expected_salary"))?null:C.touched)&&!r.isViewMode()),e.R7$(),e.Y8G("ngIf",r.isViewMode()),e.R7$(),e.Y8G("ngIf",r.isViewMode()&&(null==r.careerForm?null:r.careerForm.career_id)),e.R7$(7),e.Aen(e.eq3(68,L,r.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(k=r.careerFormForm.get("cover_letter"))?null:k.invalid)&&(null==(k=r.careerFormForm.get("cover_letter"))?null:k.touched)),e.Y8G("readonly",r.isViewMode()),e.R7$(2),e.Y8G("ngIf",(null==(y=r.careerFormForm.get("cover_letter"))?null:y.invalid)&&(null==(y=r.careerFormForm.get("cover_letter"))?null:y.touched)&&!r.isViewMode()),e.R7$(),e.Y8G("ngIf",null==r.careerForm?null:r.careerForm.cv_file),e.R7$(3),e.Y8G("ngIf",r.isViewMode())}},dependencies:[T.Y,P.bT,O.$n,G.Sm,$.Zp,S.vw,N.y8,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,V.ND,V.TM],encapsulation:2})}return a})()}}]);