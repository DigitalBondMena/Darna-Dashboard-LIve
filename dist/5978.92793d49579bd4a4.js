"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[5978],{5978:(L,g,a)=>{a.r(g),a.d(g,{UsersManagement:()=>I});var l=a(8728),h=a(9211),E=a(1256),v=a(3314),M=a(5731),d=a(5779),m=a(1314),f=a(980),e=a(3664),c=a(5531),T=a(8132),u=a(4341),C=a(2292),U=a(1020);const D=()=>["create"],F=()=>({"min-width":"50rem"}),O=n=>["view",n],P=n=>["edit",n];function R(n,_){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"th",6),e.EFF(2," ID "),e.nrm(3,"p-sortIcon",7),e.k0s(),e.j41(4,"th",8),e.EFF(5," Name "),e.nrm(6,"p-sortIcon",9),e.k0s(),e.j41(7,"th",10),e.EFF(8," Username "),e.nrm(9,"p-sortIcon",11),e.k0s(),e.j41(10,"th"),e.EFF(11,"View"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Edit"),e.k0s(),e.j41(14,"th",12)(15,"div",13)(16,"span"),e.EFF(17,"Status"),e.k0s(),e.j41(18,"p-select",14),e.mxI("ngModelChange",function(i){l.eBV(t);const r=e.XpG();return e.DH7(r.selectedStatusFilter,i)||(r.selectedStatusFilter=i),l.Njj(i)}),e.bIt("ngModelChange",function(i){l.eBV(t);const r=e.XpG();return l.Njj(r.onStatusFilter(i))}),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(18),e.Y8G("options",t.statusOptions),e.R50("ngModel",t.selectedStatusFilter),e.Y8G("showClear",!0)}}function S(n,_){1&n&&e.nrm(0,"i",20)}function j(n,_){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"a",15),e.nrm(9,"i",16),e.k0s()(),e.j41(10,"td")(11,"a",15),e.nrm(12,"i",17),e.k0s()(),e.j41(13,"td")(14,"div",18)(15,"p-toggleswitch",19),e.bIt("ngModelChange",function(){const i=l.eBV(t).$implicit,r=e.XpG();return l.Njj(r.onToggleChange(i))}),e.k0s(),e.nVh(16,S,1,0,"i",20),e.k0s()()()}if(2&n){const t=_.$implicit,s=e.XpG();e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.email),e.R7$(2),e.Y8G("routerLink",e.eq3(8,O,t.id)),e.R7$(3),e.Y8G("routerLink",e.eq3(10,P,t.id)),e.R7$(4),e.Y8G("ngModel",s.returnStatus(t.active_status))("disabled",s.isToggleLoading(t.en_slug)),e.R7$(),e.vxM(s.isToggleLoading(t.en_slug)?16:-1)}}function b(n,_){1&n&&(e.j41(0,"tr")(1,"td",21)(2,"div",22),e.nrm(3,"i",23),e.j41(4,"span",24),e.EFF(5,"No data found"),e.k0s()()()())}let I=(()=>{class n{constructor(){this.route=(0,l.WQX)(h.nX),this.messageService=(0,l.WQX)(d.bg),this.baseUrl=E.p,this.heroService=(0,l.WQX)(v.z),this.checked=!1,this.loadingToggles=new Set,this.statusOptions=[{label:"Active",value:1},{label:"Inactive",value:0}],this.selectedStatusFilter=null}getMode(){return this.route.snapshot.queryParamMap.get("mode")}getSliderId(){return this.route.snapshot.queryParamMap.get("id")}ngOnInit(){this.heroService.getUsers().subscribe(t=>{console.log(t),this.allUsers=t.data,this.users=t.data,console.log(this.users[0])})}returnStatus(t){return 1==t}isToggleLoading(t){return this.loadingToggles.has(t)}onToggleChange(t){if(this.isToggleLoading(t.id))return;this.loadingToggles.add(t.id);const s=t.active_status,i="1"===t.active_status?"0":"1";t.active_status=i,("1"===s?this.heroService.disableUser(t.id):this.heroService.activeUser(t.id)).pipe((0,f.j)(()=>{this.loadingToggles.delete(t.id)})).subscribe({next:o=>{if(o.data&&o.data.length>0){const p=o.data.find(y=>y.id===t.id);p&&(t.active_status=p.active_status)}this.messageService.add({severity:"success",summary:"Success",detail:`User ${"1"===i?"activated":"deactivated"} successfully`})},error:o=>{t.active_status=s,console.error("Toggle failed:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update user status"})}})}onDelete(t){const s=this.users.find(i=>i.id===t);s&&this.onToggleChange(s)}onActive(t){const s=this.users.find(i=>i.id===t);s&&this.onToggleChange(s)}onStatusFilter(t){this.users=null==t?[...this.allUsers]:this.allUsers.filter(s=>Number(s.active_status)===Number(t))}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-users-management"]],decls:8,vars:5,consts:[[1,"flex","justify-content-between","items-center","mb-4","w-full"],["label","Create New User","icon","pi pi-plus","severity","primary",3,"routerLink"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","id"],["field","id"],["pSortableColumn","name"],["field","name"],["pSortableColumn","email"],["field","email"],["pSortableColumn","active_status",2,"max-width","50px"],[1,"flex","flex-column","gap-2"],["optionLabel","label","optionValue","value","appendTo","body","placeholder","Filter by Status",3,"ngModelChange","options","ngModel","showClear"],[3,"routerLink"],[1,"pi","pi-eye",2,"color","#673ab7"],[1,"pi","pi-pencil",2,"color","#673ab7"],[1,"flex","align-items-center","gap-2"],[3,"ngModelChange","ngModel","disabled"],[1,"pi","pi-spin","pi-spinner",2,"color","#673ab7","font-size","0.8rem"],["colspan","12",1,"text-center","p-4"],[1,"flex","flex-column","align-items-center","justify-content-center"],[1,"pi","pi-info-circle",2,"font-size","2rem","color","var(--text-color-secondary)"],[1,"mt-2",2,"color","var(--text-color-secondary)"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"h2"),e.EFF(2,"Users Management"),e.k0s(),e.nrm(3,"p-button",1),e.k0s(),e.j41(4,"p-table",2),e.DNE(5,R,19,3,"ng-template",3)(6,j,17,12,"ng-template",4)(7,b,6,0,"ng-template",5),e.k0s()),2&s&&(e.R7$(3),e.Y8G("routerLink",e.lJ4(3,D)),e.R7$(),e.Y8G("value",i.users)("tableStyle",e.lJ4(4,F)))},dependencies:[M.g,c.XI,d.Ei,c.Tg,c.yc,T.Wk,u.BC,u.vS,C.jF,U.$n,m.py,m.l6],encapsulation:2})}return n})()}}]);