"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[6050],{6050:(te,k,r)=>{r.r(k),r.d(k,{BlogId:()=>ee});var n=r(8728),_=r(3597),a=r(4341),x=r(9211),y=r(1256),T=r(6677),w=r(9200),V=r(5779),B=r(1274),C=r(8309),e=r(3664),D=r(4781),R=r(2200),j=r(1020),A=r(1914),P=r(5506),G=r(886);const m=l=>({backgroundColor:l}),O=l=>({readonly:l,height:300,direction:"ltr"}),g=l=>({backgroundColor:l,height:"100px"}),S=l=>({readonly:l,height:300,direction:"rtl"});function $(l,s){1&l&&(e.j41(0,"small",45),e.EFF(1," Blog title is required and must be at least 3 characters long. "),e.k0s())}function Y(l,s){1&l&&(e.j41(0,"small",45),e.EFF(1," Alt image text is required. "),e.k0s())}function L(l,s){1&l&&(e.j41(0,"small",45),e.EFF(1," Meta title is required. "),e.k0s())}function N(l,s){1&l&&(e.j41(0,"small",45),e.EFF(1," Blog title is required and must be at least 3 characters long. "),e.k0s())}function W(l,s){1&l&&(e.j41(0,"small",45),e.EFF(1," Alt image text is required. "),e.k0s())}function q(l,s){1&l&&(e.j41(0,"small",45),e.EFF(1," Meta title is required. "),e.k0s())}function U(l,s){if(1&l&&(e.j41(0,"div",2)(1,"div",46)(2,"label",47),e.EFF(3),e.k0s(),e.j41(4,"div",48),e.nrm(5,"img",49),e.k0s()()()),2&l){const i=e.XpG();e.R7$(3),e.JRh(i.isViewMode()?"Image":"Current Image"),e.R7$(2),e.Y8G("src",i.baseUrl+i.blog.main_image,e.B4B)("alt",i.blog.en_alt_image)}}function K(l,s){1&l&&(e.j41(0,"span",53),e.EFF(1,"*"),e.k0s())}function X(l,s){1&l&&(e.j41(0,"div",54),e.nrm(1,"i",55),e.j41(2,"p",56),e.EFF(3," Drag and drop an image here or click to select "),e.k0s()())}function Q(l,s){1&l&&(e.j41(0,"small",45),e.EFF(1," Image is required for creating a new blog. "),e.k0s())}function z(l,s){if(1&l){const i=e.RV6();e.j41(0,"div",50)(1,"label",47),e.EFF(2," Upload New Image "),e.DNE(3,K,2,0,"span",51),e.k0s(),e.j41(4,"p-fileupload",52),e.bIt("onSelect",function(t){n.eBV(i);const d=e.XpG();return n.Njj(d.onImageSelect(t))}),e.DNE(5,X,4,0,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(7,Q,2,0,"small",12),e.k0s()}if(2&l){let i;const o=e.XpG();e.R7$(3),e.Y8G("ngIf",o.isCreateMode()),e.R7$(),e.Y8G("multiple",!1)("auto",!1),e.R7$(3),e.Y8G("ngIf",o.isCreateMode()&&!o.selectedFile&&(null==(i=o.blogForm.get("main_image"))?null:i.invalid))}}function H(l,s){if(1&l&&(e.qex(0),e.nrm(1,"p-button",57),e.bVm()),2&l){const i=e.XpG();e.R7$(),e.Y8G("loading",i.isLoading())}}function J(l,s){if(1&l&&(e.qex(0),e.nrm(1,"p-button",58),e.bVm()),2&l){const i=e.XpG();e.R7$(),e.Y8G("disabled",i.blogForm.invalid||i.isLoading())("loading",i.isLoading())}}function Z(l,s){if(1&l){const i=e.RV6();e.qex(0),e.j41(1,"p-button",59),e.bIt("click",function(){n.eBV(i);const t=e.XpG();return n.Njj(t.onCancel())}),e.k0s(),e.j41(2,"p-button",60),e.bIt("click",function(){n.eBV(i);const t=e.XpG();return n.Njj(t.onEditBlog())}),e.k0s(),e.bVm()}}let ee=(()=>{class l{constructor(){this.blogService=(0,n.WQX)(C.c),this.fb=(0,n.WQX)(a.ok),this.messageService=(0,n.WQX)(V.bg),this.route=(0,n.WQX)(x.nX),this.router=(0,n.WQX)(x.Ix),this.mode=(0,n.vPA)("create"),this.blogId=(0,n.vPA)(null),this.isLoading=(0,n.vPA)(!1),this.baseUrl=y.p,this.selectedFile=null,this.isEditMode=(0,_.EW)(()=>"edit"===this.mode()),this.isCreateMode=(0,_.EW)(()=>"create"===this.mode()),this.isViewMode=(0,_.EW)(()=>"view"===this.mode()),this.isFormValid=(0,_.EW)(()=>{if(!this.blogForm)return!1;const i=this.blogForm.valid;return this.isCreateMode()?i&&!!this.selectedFile:i}),this.pageTitle=(0,_.EW)(()=>{switch(this.mode()){case"create":return"Create New Blog";case"edit":return"Edit Blog Mode";case"view":return"View Blog Mode";default:return"Blog Form"}}),(0,_.QZ)(()=>{this.blogForm&&(this.isViewMode()?this.blogForm.disable():this.blogForm.enable())})}ngOnInit(){this.initForm(),this.setupRouteHandling()}setupRouteHandling(){this.route.data.subscribe(i=>{this.mode.set(i.mode||"create")}),this.route.params.subscribe(i=>{const o=i.id;o&&(this.blogId.set(+o),this.loadBlogData(+o))})}initForm(){this.blogForm=this.fb.group({en_blog_title:["",[a.k0.required]],ar_blog_title:["",[a.k0.required]],en_blog_text:["",[a.k0.required]],ar_blog_text:["",[a.k0.required]],en_alt_image:["",[a.k0.required]],ar_alt_image:["",[a.k0.required]],en_meta_title:["",[a.k0.required]],ar_meta_title:["",[a.k0.required]],en_meta_text:["",[a.k0.required]],ar_meta_text:["",[a.k0.required]],en_first_script_text:["",[a.k0.required]],ar_first_script_text:["",[a.k0.required]],en_second_script_text:["",[a.k0.required]],ar_second_script_text:["",[a.k0.required]]})}loadBlogData(i){const o=i||this.blogId()||1;this.blogService.getBlog(o).subscribe({next:t=>{this.blog=t.data,this.blogForm.patchValue({en_blog_title:this.blog.en_blog_title,ar_blog_title:this.blog.ar_blog_title,en_blog_text:this.blog.en_blog_text,ar_blog_text:this.blog.ar_blog_text,main_image:this.blog.main_image,en_alt_image:this.blog.en_alt_image,ar_alt_image:this.blog.ar_alt_image,en_meta_title:this.blog.en_meta_title,ar_meta_title:this.blog.ar_meta_title,en_meta_text:this.blog.en_meta_text,ar_meta_text:this.blog.ar_meta_text,en_first_script_text:this.blog.en_first_script_text,ar_first_script_text:this.blog.ar_first_script_text,en_second_script_text:this.blog.en_second_script_text,ar_second_script_text:this.blog.ar_second_script_text}),this.isLoading.set(!1)},error:t=>{console.error("Error loading blog data:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load blog data"}),this.isLoading.set(!1)}})}onImageSelect(i){const o=i.files||i.currentFiles;if(o&&o.length>0){const t=o[0];if(!t.type.startsWith("image/"))return void this.messageService.add({severity:"error",summary:"Invalid File",detail:"Please select an image file"});if(t.size>5e6)return void this.messageService.add({severity:"error",summary:"File Too Large",detail:"Please select an image smaller than 5MB"});this.selectedFile=t,this.messageService.add({severity:"success",summary:"File Selected",detail:`Image "${t.name}" selected successfully`})}}onSubmit(){if(console.log(this.blogForm.value),console.log(this.blogForm.controls),!this.isFormValid()||this.isViewMode())return void this.messageService.add({severity:"warn",summary:"Warning",detail:this.isCreateMode()&&!this.selectedFile?"Please select an image file and fill all required fields":"Please fill all required fields correctly"});this.isLoading.set(!0);const i=this.blogForm.value;this.isCreateMode()?this.createBlog(i):this.isEditMode()&&this.updateBlog()}createBlog(i){if(!this.selectedFile)return this.messageService.add({severity:"warn",summary:"Warning",detail:"Please select an image file"}),void this.isLoading.set(!1);this.blogService.addUpdateBlog(i,this.selectedFile).subscribe({next:o=>{console.log("Create successful:",o),this.messageService.add({severity:"success",summary:"Success",detail:"Blog created successfully"}),this.router.navigate(["/dashboard/blogs"])},error:o=>{console.error("Error creating blog:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to create blog"}),this.isLoading.set(!1)}})}updateBlog(){this.isLoading.set(!0);const i=this.blogForm.value;console.log(i),this.blogService.addUpdateBlog(i,this.selectedFile||void 0,this.blog.id).subscribe({next:o=>{console.log("Update successful:",o),this.messageService.add({severity:"success",summary:"Success",detail:"Blog updated successfully"}),this.loadBlogData(),this.isLoading.set(!1)},error:o=>{console.error("Error updating blog:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update blog"}),this.isLoading.set(!1)}})}onCancel(){this.router.navigate(["/dashboard/blogs"])}onEditBlog(){this.blogId()&&this.router.navigate(["../../edit",this.blogId()],{relativeTo:this.route})}static#e=this.\u0275fac=function(o){return new(o||l)};static#t=this.\u0275cmp=e.VBU({type:l,selectors:[["app-blog-id"]],decls:93,vars:91,consts:[["empty",""],[1,"grid"],[1,"col-12"],["styleClass","shadow-2",3,"header"],[1,"p-fluid"],[3,"ngSubmit","formGroup"],[1,"grid","mt-4"],[1,"col-12","md:col-6"],[1,"text-2xl","font-bold","mb-4"],[1,"field","mb-3"],["for","en_blog_title",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_blog_title","formControlName","en_blog_title","placeholder","Enter English blog title",2,"width","100%",3,"readonly"],["class","p-error block",4,"ngIf"],["for","en_blog_text",1,"block","text-900","font-medium","mb-2"],[1,"card"],["placeholder","Enter English blog content","formControlName","en_blog_text",3,"options"],["for","en_alt_image",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_alt_image","formControlName","en_alt_image","placeholder","Enter English alt image text",2,"width","100%",3,"readonly"],["for","en_meta_title",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","en_meta_title","formControlName","en_meta_title","placeholder","Enter English meta title",2,"width","100%",3,"readonly"],["for","en_meta_text",1,"block","text-900","font-medium","mb-2"],["pInputTextarea","","id","en_meta_text","formControlName","en_meta_text","placeholder","Enter English meta description",2,"width","100%",3,"readonly"],["for","en_first_script_text",1,"block","text-900","font-medium","mb-2"],["pInputTextarea","","id","en_first_script_text","formControlName","en_first_script_text","placeholder","Enter English first script text",1,"form-control",2,"width","100%",3,"readonly"],["for","en_second_script_text",1,"block","text-900","font-medium","mb-2"],["pInputTextarea","","id","en_second_script_text","formControlName","en_second_script_text","placeholder","Enter English second script text",1,"form-control",2,"width","100%",3,"readonly"],[1,"col-12","md:col-6","right-side"],["for","ar_blog_title",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","ar_blog_title","formControlName","ar_blog_title","placeholder","Enter Arabic blog title",2,"width","100%",3,"readonly"],["for","ar_blog_text",1,"block","text-900","font-medium","mb-2"],["placeholder","Enter Arabic blog content","formControlName","ar_blog_text",3,"options"],["for","ar_alt_image",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","ar_alt_image","formControlName","ar_alt_image","placeholder","Enter Arabic alt image text",2,"width","100%",3,"readonly"],["for","ar_meta_title",1,"block","text-900","font-medium","mb-2"],["pInputText","","id","ar_meta_title","formControlName","ar_meta_title","placeholder","Enter Arabic meta title",2,"width","100%",3,"readonly"],["for","ar_meta_text",1,"block","text-900","font-medium","mb-2"],["pInputTextarea","","id","ar_meta_text","formControlName","ar_meta_text","placeholder","Enter Arabic meta description",1,"form-control",2,"width","100%",3,"readonly"],["for","ar_first_script_text",1,"block","text-900","font-medium","mb-2"],["pInputTextarea","","id","ar_first_script_text","formControlName","ar_first_script_text","placeholder","Enter Arabic first script text",1,"form-control",2,"width","100%",3,"readonly"],["for","ar_second_script_text",1,"block","text-900","font-medium","mb-2"],["pInputTextarea","","id","ar_second_script_text","formControlName","ar_second_script_text","placeholder","Enter Arabic second script text",1,"form-control",2,"width","100%",3,"readonly"],["class","col-12",4,"ngIf"],["class","field col-12",4,"ngIf"],[1,"flex","justify-content-end","gap-2","pt-3"],[4,"ngIf"],[1,"p-error","block"],[1,"field"],[1,"block","text-900","font-medium","mb-2"],[1,"border-1","border-300","border-round","p-3","text-center"],[1,"w-full","max-w-20rem","h-auto","border-round","shadow-2",2,"max-height","300px","object-fit","cover",3,"src","alt"],[1,"field","col-12"],["class","text-red-500",4,"ngIf"],["name","main_image","accept","image/*","maxFileSize","5000000","mode","advanced","chooseLabel","Choose Image","uploadLabel"," ","cancelLabel","Cancel",3,"onSelect","multiple","auto"],[1,"text-red-500"],[1,"text-center","p-4"],[1,"pi","pi-cloud-upload","text-4xl","text-300"],[1,"mt-2","mb-0"],["label","Create Blog","icon","pi pi-plus","severity","primary","type","submit",3,"loading"],["label","Update Blog","icon","pi pi-check","severity","primary","type","submit",3,"disabled","loading"],["label","Back","icon","pi pi-arrow-left","severity","secondary","type","button",3,"click"],["label","Edit","icon","pi pi-pencil","severity","primary","type","button",3,"click"]],template:function(o,t){if(1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"p-card",3)(3,"div",4)(4,"form",5),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(5,"div",6)(6,"div",7)(7,"h2",8),e.EFF(8,"English Content"),e.k0s(),e.j41(9,"div",9)(10,"label",10),e.EFF(11," Blog Title "),e.k0s(),e.nrm(12,"input",11),e.DNE(13,$,2,0,"small",12),e.k0s(),e.j41(14,"div",9)(15,"label",13),e.EFF(16," Blog Content "),e.k0s(),e.j41(17,"div",14),e.nrm(18,"ngx-jodit",15),e.k0s()(),e.j41(19,"div",9)(20,"label",16),e.EFF(21," Alt Image Text "),e.k0s(),e.nrm(22,"input",17),e.DNE(23,Y,2,0,"small",12),e.k0s(),e.j41(24,"div",9)(25,"label",18),e.EFF(26," Meta Title "),e.k0s(),e.nrm(27,"input",19),e.DNE(28,L,2,0,"small",12),e.k0s(),e.j41(29,"div",9)(30,"label",20),e.EFF(31," Meta Description "),e.k0s(),e.j41(32,"textarea",21),e.EFF(33,"                "),e.k0s()(),e.j41(34,"div",9)(35,"label",22),e.EFF(36," First Script Text "),e.k0s(),e.j41(37,"textarea",23),e.EFF(38,"                "),e.k0s()(),e.j41(39,"div",9)(40,"label",24),e.EFF(41," Second Script Text "),e.k0s(),e.j41(42,"textarea",25),e.EFF(43,"                "),e.k0s()()(),e.j41(44,"div",26)(45,"h2",8),e.EFF(46,"Arabic Content"),e.k0s(),e.j41(47,"div",9)(48,"label",27),e.EFF(49," Blog Title "),e.k0s(),e.nrm(50,"input",28),e.DNE(51,N,2,0,"small",12),e.k0s(),e.j41(52,"div",9)(53,"label",29),e.EFF(54," Blog Content "),e.k0s(),e.j41(55,"div",14),e.nrm(56,"ngx-jodit",30),e.k0s()(),e.j41(57,"div",9)(58,"label",31),e.EFF(59," Alt Image Text "),e.k0s(),e.nrm(60,"input",32),e.DNE(61,W,2,0,"small",12),e.k0s(),e.j41(62,"div",9)(63,"label",33),e.EFF(64," Meta Title "),e.k0s(),e.nrm(65,"input",34),e.DNE(66,q,2,0,"small",12),e.k0s(),e.j41(67,"div",9)(68,"label",35),e.EFF(69," Meta Description "),e.k0s(),e.j41(70,"textarea",36),e.EFF(71,"                "),e.k0s()(),e.j41(72,"div",9)(73,"label",37),e.EFF(74," First Script Text "),e.k0s(),e.j41(75,"textarea",38),e.EFF(76,"                "),e.k0s()(),e.j41(77,"div",9)(78,"label",39),e.EFF(79," Second Script Text "),e.k0s(),e.j41(80,"textarea",40),e.EFF(81,"                "),e.k0s()()(),e.DNE(82,U,6,3,"div",41),e.j41(83,"div",2)(84,"h2",8),e.EFF(85,"Additional Information"),e.k0s(),e.DNE(86,z,8,4,"div",42),e.k0s(),e.j41(87,"div",2)(88,"div",43),e.DNE(89,H,2,1,"ng-container",44)(90,J,2,2,"ng-container",44)(91,Z,3,0,"ng-container",44),e.k0s()()()()()()()(),e.nrm(92,"p-toast")),2&o){let d,c,u,f,b,p,h,E,F,v,M,I;e.R7$(2),e.Y8G("header",t.pageTitle()),e.R7$(2),e.Y8G("formGroup",t.blogForm),e.R7$(8),e.Aen(e.eq3(63,m,t.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(d=t.blogForm.get("en_blog_title"))?null:d.invalid)&&(null==(d=t.blogForm.get("en_blog_title"))?null:d.touched)),e.Y8G("readonly",t.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(c=t.blogForm.get("en_blog_title"))?null:c.invalid)&&(null==(c=t.blogForm.get("en_blog_title"))?null:c.touched)&&!t.isViewMode()),e.R7$(5),e.Y8G("options",e.eq3(65,O,t.isViewMode())),e.R7$(4),e.Aen(e.eq3(67,m,t.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(u=t.blogForm.get("en_alt_image"))?null:u.invalid)&&(null==(u=t.blogForm.get("en_alt_image"))?null:u.touched)),e.Y8G("readonly",t.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(f=t.blogForm.get("en_alt_image"))?null:f.invalid)&&(null==(f=t.blogForm.get("en_alt_image"))?null:f.touched)&&!t.isViewMode()),e.R7$(4),e.Aen(e.eq3(69,m,t.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(b=t.blogForm.get("en_meta_title"))?null:b.invalid)&&(null==(b=t.blogForm.get("en_meta_title"))?null:b.touched)),e.Y8G("readonly",t.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(p=t.blogForm.get("en_meta_title"))?null:p.invalid)&&(null==(p=t.blogForm.get("en_meta_title"))?null:p.touched)&&!t.isViewMode()),e.R7$(4),e.Aen(e.eq3(71,g,t.isViewMode()?"#f0f0f0":"white")),e.Y8G("readonly",t.isViewMode()),e.R7$(5),e.Aen(e.eq3(73,g,t.isViewMode()?"#f0f0f0":"white")),e.Y8G("readonly",t.isViewMode()),e.R7$(5),e.Aen(e.eq3(75,g,t.isViewMode()?"#f0f0f0":"white")),e.Y8G("readonly",t.isViewMode()),e.R7$(8),e.Aen(e.eq3(77,m,t.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(h=t.blogForm.get("ar_blog_title"))?null:h.invalid)&&(null==(h=t.blogForm.get("ar_blog_title"))?null:h.touched)),e.Y8G("readonly",t.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(E=t.blogForm.get("ar_blog_title"))?null:E.invalid)&&(null==(E=t.blogForm.get("ar_blog_title"))?null:E.touched)&&!t.isViewMode()),e.R7$(5),e.Y8G("options",e.eq3(79,S,t.isViewMode())),e.R7$(4),e.Aen(e.eq3(81,m,t.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(F=t.blogForm.get("ar_alt_image"))?null:F.invalid)&&(null==(F=t.blogForm.get("ar_alt_image"))?null:F.touched)),e.Y8G("readonly",t.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(v=t.blogForm.get("ar_alt_image"))?null:v.invalid)&&(null==(v=t.blogForm.get("ar_alt_image"))?null:v.touched)&&!t.isViewMode()),e.R7$(4),e.Aen(e.eq3(83,m,t.isViewMode()?"#f0f0f0":"white")),e.AVh("ng-invalid",(null==(M=t.blogForm.get("ar_meta_title"))?null:M.invalid)&&(null==(M=t.blogForm.get("ar_meta_title"))?null:M.touched)),e.Y8G("readonly",t.isViewMode()),e.R7$(),e.Y8G("ngIf",(null==(I=t.blogForm.get("ar_meta_title"))?null:I.invalid)&&(null==(I=t.blogForm.get("ar_meta_title"))?null:I.touched)&&!t.isViewMode()),e.R7$(4),e.Aen(e.eq3(85,g,t.isViewMode()?"#f0f0f0":"white")),e.Y8G("readonly",t.isViewMode()),e.R7$(5),e.Aen(e.eq3(87,g,t.isViewMode()?"#f0f0f0":"white")),e.Y8G("readonly",t.isViewMode()),e.R7$(5),e.Aen(e.eq3(89,g,t.isViewMode()?"#f0f0f0":"white")),e.Y8G("readonly",t.isViewMode()),e.R7$(2),e.Y8G("ngIf",null==t.blog?null:t.blog.main_image),e.R7$(4),e.Y8G("ngIf",!t.isViewMode()),e.R7$(3),e.Y8G("ngIf",t.isCreateMode()),e.R7$(),e.Y8G("ngIf",t.isEditMode()),e.R7$(),e.Y8G("ngIf",t.isViewMode())}},dependencies:[T.Y,D.ef,R.bT,j.$n,A.Sm,P.Zp,G.y8,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,B.ND,B.TM,w.V],styles:[".p-fileupload-upload-button{display:none!important}  .p-fileupload-file-badge{display:none!important}  .ql-disabled .ql-editor{background-color:#cbd5e1!important;color:#475569}.rtl-editor[_ngcontent-%COMP%]     .ql-editor{text-align:right!important}"]})}return l})()}}]);